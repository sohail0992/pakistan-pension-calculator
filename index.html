<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    <title>Pension Planner | Pakistan</title>
    <!-- Fonts for different languages - Load only when needed -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- Shared CSS -->
    <link rel="stylesheet" href="styles.css">
    <style>
        :root { --meezan-green: #007565; --bg: #f0f4f3; --text: #333; }
        
        /* Page-specific styles for index.html */
        body { background: var(--bg); display: flex; justify-content: center; }
        .main-container { display: grid; grid-template-columns: 2.5fr auto 1fr; gap: 20px; position: relative; align-items: start; }
        .input-section { display: flex; flex-direction: column; }
        .results-section { display: flex; flex-direction: column; align-self: start; margin-top: 20px; }
        .column-divider { width: 2px; background: #eee; margin: 0 10px; }
        
        /* RTL Support for Urdu, Pashto, and Hindko */
        body[dir="rtl"] .main-container { 
            direction: rtl; 
            grid-template-columns: 1fr auto 2.5fr; /* Flip columns: results first, then divider, then inputs */
        }
        body[dir="rtl"] .input-section { 
            text-align: right; 
            order: 3;
        }
        body[dir="rtl"] .results-section { 
            text-align: right; 
            order: 1;
        }
        body[dir="rtl"] .column-divider { 
            order: 2;
        }
        body[dir="rtl"] .stat-box { text-align: right; }
        body[dir="rtl"] .stat-row { 
            flex-direction: row-reverse; 
            justify-content: space-between;
        }
        body[dir="rtl"] .input-row { 
            direction: rtl; 
            text-align: right;
        }
        body[dir="rtl"] label { text-align: right; }
        body[dir="rtl"] .footer { text-align: center; }
        body[dir="rtl"] .shareable-card { transform: rotate(1deg); }
        body[dir="rtl"] .stat-label { text-align: right; }
        body[dir="rtl"] .stat-value { text-align: right; }
        body[dir="rtl"] .stat-title { text-align: right; }
        body[dir="rtl"] .stat-number { text-align: left; }
        body[dir="rtl"] h1 { text-align: center; }
        body[dir="rtl"] .tooltip { left: auto; right: 50%; transform: translateX(50%); }
        body[dir="rtl"] .tooltip::after { left: auto; right: 50%; transform: translateX(50%); }
        body[dir="rtl"] input { text-align: right; direction: rtl; }
        body[dir="rtl"] input[type="number"] { direction: ltr; text-align: right; }
        body[dir="rtl"] .slider-container { direction: rtl; }
        body[dir="rtl"] .share-buttons { direction: ltr; }
        .shareable-card { background: #fff9c4; border: 2px solid #fdd835; border-radius: 2px; padding: 15px; box-shadow: 0 4px 8px rgba(0,0,0,0.2), 0 2px 4px rgba(0,0,0,0.1); transform: rotate(-1deg); position: relative; }
        .shareable-card::before { content: ''; position: absolute; top: -2px; right: 30px; width: 20px; height: 20px; background: #fff9c4; border: 2px solid #fdd835; border-bottom: none; border-right: none; transform: rotate(45deg); }
        .shareable-card .stat-box { padding: 6px; margin-bottom: 5px; background: rgba(255,255,255,0.5); border-left: 3px solid #fdd835; }
        .shareable-card .stat-title { font-size: 0.65rem; }
        .shareable-card .stat-value { font-size: 0.9rem; }
        .shareable-card .stat-label { font-size: 0.7rem; }
        .shareable-card .stat-number { font-size: 0.75rem; }
        .share-buttons { display: flex; gap: 12px; margin-top: 15px; justify-content: center; }
        .share-btn { width: 45px; height: 45px; border: none; border-radius: 50%; cursor: pointer; transition: all 0.3s; display: flex; align-items: center; justify-content: center; box-shadow: 0 2px 6px rgba(0,0,0,0.2); }
        .share-btn:hover { transform: scale(1.1); box-shadow: 0 4px 8px rgba(0,0,0,0.3); }
        .share-btn svg { width: 24px; height: 24px; }
        .share-btn-whatsapp { background: #25D366; }
        .share-btn-email { background: #007565; }
        .share-btn-twitter { background: #1DA1F2; }
        .share-btn-copy { background: #6c757d; }
        @media (max-width: 968px) {
            .main-container { grid-template-columns: 1fr; gap: 15px; }
            .column-divider { display: none; }
            .results-section { margin-top: 0 !important; }
        }
        
        /* Page-specific mobile styles */
        @media (max-width: 768px) {
            .input-row { grid-template-columns: 1fr; gap: 15px; margin-bottom: 15px; }
            .input-full { margin-bottom: 15px; }
            label { font-size: 0.9rem; margin-bottom: 6px; }
            input { padding: 14px; font-size: 16px; /* Prevents zoom on iOS */ }
            .slider-container { flex-direction: column; gap: 8px; }
            .slider-value { font-size: 1.1rem; }
            .shareable-card { padding: 12px !important; margin-top: 15px !important; }
            .share-buttons { gap: 10px; flex-wrap: wrap; justify-content: center; }
            .share-btn { width: 50px; height: 50px; }
            .share-btn svg { width: 22px; height: 22px; }
            .stat-box { padding: 12px; margin-bottom: 8px; }
            .stat-title { font-size: 0.75rem; }
            .stat-value { font-size: 1.1rem; }
            .stat-label { font-size: 0.8rem; }
            .stat-number { font-size: 0.9rem; }
            .tooltip { width: 90vw; max-width: 300px; font-size: 0.75rem; padding: 10px; }
        }
        
        @media (max-width: 375px) {
            .input-row { gap: 12px; margin-bottom: 12px; }
            input { padding: 12px; }
            .shareable-card { padding: 10px !important; }
            .stat-box { padding: 10px; }
        }
        
        @media (max-width: 968px) and (orientation: landscape) {
            .input-row { grid-template-columns: 1fr 1fr; gap: 10px; }
            .results-section { margin-top: 0 !important; }
        }
        .mode-selector { display: flex; gap: 10px; margin-bottom: 20px; }
        .mode-btn { flex: 1; padding: 12px; border: 2px solid var(--meezan-green); background: white; color: var(--meezan-green); border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s; }
        .mode-btn.active { background: var(--meezan-green); color: white; }
        .input-row { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 20px; }
        .input-full { margin-bottom: 20px; }
        label { display: block; margin-bottom: 8px; font-size: 0.85rem; font-weight: 600; color: #666; }
        .label-hint { font-size: 0.75rem; color: #999; font-weight: normal; margin-left: 5px; }
        .help-icon { display: inline-block; width: 16px; height: 16px; background: var(--meezan-green); color: white; border-radius: 50%; text-align: center; line-height: 16px; font-size: 11px; font-weight: bold; cursor: help; margin-left: 5px; vertical-align: middle; }
        .tooltip-container { position: relative; display: inline-block; z-index: 1000; }
        .tooltip { visibility: hidden; position: absolute; background: #333; color: white; padding: 12px; border-radius: 8px; font-size: 0.8rem; width: 280px; z-index: 10000; bottom: 125%; left: 50%; transform: translateX(-50%); box-shadow: 0 4px 12px rgba(0,0,0,0.2); white-space: normal; }
        .tooltip::after { content: ""; position: absolute; top: 100%; left: 50%; transform: translateX(-50%); border: 6px solid transparent; border-top-color: #333; }
        .tooltip-container:hover .tooltip { visibility: visible; }
        .tooltip:hover { visibility: visible; }
        .input-section, .results-section { overflow: visible; }
        .main-container { overflow: visible; }
        .tooltip-title { font-weight: bold; margin-bottom: 8px; color: #fff; }
        .tooltip-example { margin-top: 8px; line-height: 1.6; }
        .tooltip-year { display: flex; justify-content: space-between; padding: 2px 0; }
        .tooltip-year-label { color: #ccc; }
        .tooltip-year-value { font-weight: bold; }
        .tooltip-toggle { display: flex; gap: 5px; margin-bottom: 10px; border-bottom: 1px solid #555; padding-bottom: 8px; }
        .tooltip-toggle-btn { flex: 1; padding: 5px 8px; background: #555; color: #fff; border: none; border-radius: 4px; cursor: pointer; font-size: 0.75rem; text-align: center; transition: background 0.2s; }
        .tooltip-toggle-btn:hover { background: #666; }
        .tooltip-toggle-btn.active { background: var(--meezan-green); }
        input { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; box-sizing: border-box; }
        input:disabled { background: #f5f5f5; color: #999; }
        input[type="range"] { width: 100%; height: 8px; border-radius: 5px; background: #ddd; outline: none; -webkit-appearance: none; appearance: none; }
        input[type="range"]::-webkit-slider-thumb { -webkit-appearance: none; appearance: none; width: 20px; height: 20px; border-radius: 50%; background: var(--meezan-green); cursor: pointer; }
        input[type="range"]::-moz-range-thumb { width: 20px; height: 20px; border-radius: 50%; background: var(--meezan-green); cursor: pointer; border: none; appearance: none; }
        .slider-container { display: flex; gap: 10px; align-items: center; }
        .slider-container input[type="range"] { flex: 1; }
        .slider-value { min-width: 60px; text-align: center; font-weight: bold; color: var(--meezan-green); font-size: 1rem; }
        .checkbox-container { display: flex; align-items: center; gap: 10px; margin-bottom: 15px; padding: 12px; background: #f9f9f9; border-radius: 8px; }
        .checkbox-container input[type="checkbox"] { width: 20px; height: 20px; cursor: pointer; }
        .checkbox-container label { margin: 0; font-size: 0.9rem; cursor: pointer; }
        button { width: 100%; padding: 15px; background: var(--meezan-green); color: white; border: none; border-radius: 8px; font-weight: bold; cursor: pointer; margin-top: 20px; font-size: 1.1rem; transition: background 0.3s; }
        button:hover { background: #005a4d; }
        .results { display: flex; flex-direction: column; gap: 10px; }
        .results.hidden { display: none; }
        .results-section .shareable-card { margin-top: 0; padding-top: 15px; }
        .stat-box { background: #e6f4f1; padding: 15px; border-radius: 10px; border-left: 5px solid var(--meezan-green); }
        @media (max-width: 768px) {
            .results-grid { grid-template-columns: 1fr; }
        }
        .stat-title { font-size: 0.8rem; color: #555; display: block; margin-bottom: 5px; }
        .stat-value { font-size: 1.3rem; font-weight: bold; color: var(--meezan-green); display: block; }
        .stat-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 8px; }
        .stat-row:last-child { margin-bottom: 0; }
        .stat-label { font-size: 0.85rem; color: #666; }
        .stat-number { font-size: 1rem; font-weight: 600; color: var(--meezan-green); }
        .inflation-warning { color: #d35400; font-size: 0.75rem; padding: 8px 12px; background: #fff3e0; border-radius: 6px; margin-top: 10px; line-height: 1.4; border-left: 3px solid #d35400; }
        
        /* Explanation Section */
        .explanation-toggle {
            width: 100%;
            padding: 12px 15px;
            background: #f8f9fa;
            border: 2px solid var(--meezan-green);
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            justify-content: space-between;
            align-items: center;
            font-size: 0.95rem;
            font-weight: 600;
            color: var(--meezan-green);
            transition: all 0.3s;
            margin-bottom: 0;
        }
        .explanation-toggle:hover {
            background: #e6f4f1;
            transform: translateY(-1px);
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        .explanation-toggle span:last-child {
            font-size: 0.8rem;
            transition: transform 0.3s;
        }
        .explanation-toggle.active span:last-child {
            transform: rotate(180deg);
        }
        .explanation-content {
            background: #f8f9fa;
            border: 1px solid #e0e0e0;
            border-top: none;
            border-radius: 0 0 8px 8px;
            padding: 20px;
            margin-top: 0;
        }
        .explanation-section {
            margin-bottom: 20px;
        }
        .explanation-section:last-child {
            margin-bottom: 0;
        }
        .explanation-section h3 {
            color: var(--meezan-green);
            font-size: 1rem;
            margin-bottom: 10px;
            margin-top: 0;
        }
        .explanation-section p {
            font-size: 0.9rem;
            line-height: 1.6;
            color: #555;
            margin-bottom: 10px;
        }
        .explanation-section ul, .explanation-section ol {
            font-size: 0.9rem;
            line-height: 1.8;
            color: #555;
            margin-left: 20px;
            margin-bottom: 10px;
        }
        .explanation-section li {
            margin-bottom: 5px;
        }
        .explanation-formula {
            background: #fff;
            padding: 12px;
            border-left: 4px solid var(--meezan-green);
            border-radius: 4px;
            font-family: 'Courier New', monospace;
            font-size: 0.85rem;
            margin: 10px 0;
            overflow-x: auto;
        }
        body[dir="rtl"] .explanation-section ul, body[dir="rtl"] .explanation-section ol {
            margin-left: 0;
            margin-right: 20px;
        }
        body[dir="rtl"] .explanation-formula {
            border-left: none;
            border-right: 4px solid var(--meezan-green);
        }
    </style>
</head>
<body>

<div class="language-switcher">
    <div class="language-icon-btn" onclick="toggleLanguageDropdown()" id="languageIconBtn" title="Change Language">
        <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"/>
        </svg>
    </div>
    <div class="language-dropdown" id="languageDropdown">
        <div class="language-option active" onclick="switchLanguage('en')" data-lang="en">English</div>
        <div class="language-option" onclick="switchLanguage('ur')" data-lang="ur">Ø§Ø±Ø¯Ùˆ</div>
        <div class="language-option" onclick="switchLanguage('ps')" data-lang="ps">Ù¾ÚšØªÙˆ</div>
        <div class="language-option" onclick="switchLanguage('hnd')" data-lang="hnd">ÛÙ†Ø¯Ú©Ùˆ</div>
    </div>
</div>

<div class="card">
    <div class="main-container">
        <div class="input-section">
            <h1 id="pageHeaderTitle"></h1>
            <div class="input-row">
        <div>
        <label id="labelCurrentAge"></label>
            <input type="number" id="currentAge" value="30" min="18" max="100" onkeypress="return validateIntegerInput(event)" oninput="cleanIntegerInput(this); updateFields()" onpaste="setTimeout(() => cleanIntegerInput(this), 0)">
        </div>
        <div>
            <label id="labelRetireAge"></label>
            <input type="number" id="retireAge" value="60" min="50" max="80" onkeypress="return validateIntegerInput(event)" oninput="cleanIntegerInput(this); updateFields()" onpaste="setTimeout(() => cleanIntegerInput(this), 0)">
        </div>
    </div>

    <hr style="margin: 20px 0; border: none; border-top: 2px solid #eee;">

    <div class="input-row">
        <div>
            <label id="labelDeathAge">
                <span id="labelDeathAgeText"></span>
                <span class="tooltip-container">
                    <span class="help-icon">?</span>
                    <div class="tooltip">
                        <div class="tooltip-title" id="tooltipLifeExpectancyTitle"></div>
                        <div class="tooltip-example" style="line-height: 1.6;">
                            <div id="tooltipLifeExpectancyDesc">Pakistan's average life expectancy is approximately <b>68 years</b> (<span id="currentYear"></span>).</div>
                            <div style="margin-top: 8px; font-size: 0.85rem; color: #ccc;" id="tooltipLifeExpectancyNote">This determines how long you'll receive pension payouts after retirement. Adjust based on your health and family history.</div>
                        </div>
                    </div>
                </span>
            </label>
            <input type="number" id="deathAge" value="68" min="60" max="120" onkeypress="return validateIntegerInput(event)" oninput="cleanIntegerInput(this); updateFields()" onpaste="setTimeout(() => cleanIntegerInput(this), 0)">
        </div>
        <div>
            <label id="labelPayoutPeriod"></label>
            <div style="padding: 10px; background: #f5f5f5; border: 1px solid #ddd; border-radius: 8px; font-size: 1rem; color: #666; cursor: default; user-select: none;" id="payoutPeriodDisplay">96 months (8 years)</div>
        </div>
    </div>

    <div class="input-row">
        <div>
            <label id="labelStepUp">
                <span id="labelStepUpText"></span>
                <span class="tooltip-container">
                    <span class="help-icon">?</span>
                    <div class="tooltip" id="stepUpTooltip">
                        <div class="tooltip-title" id="tooltipStepUpTitle"></div>
                        <div class="tooltip-toggle">
                            <button class="tooltip-toggle-btn active" onclick="showStepUpView('normal', event)" id="btnStepUpNormal"></button>
                            <button class="tooltip-toggle-btn" onclick="showStepUpView('inflation', event)" id="btnStepUpInflation"></button>
                        </div>
                        <div class="tooltip-example" id="stepUpExample">
                            <!-- Content will be populated by JavaScript -->
                        </div>
                    </div>
                </span>
            </label>
            <input type="number" id="stepUp" value="10" min="0" max="50" step="0.5" onkeypress="return validateDecimalInput(event)" oninput="cleanDecimalInput(this); updateStepUpTooltip(); calculate()" onpaste="setTimeout(() => cleanDecimalInput(this), 0)">
        </div>
        <div>
            <label id="labelInflation">
                <span id="labelInflationText"></span>
                <span class="label-hint" id="labelInflationHint"></span>
                <span class="tooltip-container">
                    <span class="help-icon">?</span>
                    <div class="tooltip" id="inflationTooltip">
                        <div class="tooltip-title" id="tooltipInflationTitle"></div>
                        <div class="tooltip-example" id="inflationTooltipContent" style="line-height: 1.6;">
                            <!-- Content will be populated by JavaScript -->
                        </div>
                    </div>
                </span>
            </label>
            <div class="slider-container" style="margin-top: 8px;">
                <input type="range" id="inflationSlider" value="9" min="5" max="20" step="0.1" oninput="updateInflationFromSlider()">
                <span class="slider-value" id="inflationValue">9.0%</span>
            </div>
            <input type="hidden" id="inflation" value="9">
        </div>
    </div>


    <hr style="margin: 20px 0; border: none; border-top: 2px solid #eee;">

    <div class="input-row">
        <div>
            <label id="labelMonthlyPayout"></label>
            <input type="text" id="targetPayout" value="100,000" onkeypress="return validateIntegerInput(event)" oninput="formatMoneyInput(this); calculate()" onpaste="setTimeout(() => formatMoneyInput(this), 0)" inputmode="numeric">
        </div>
        <div>
            <label id="labelMonthlyContribution"></label>
            <input type="text" id="monthlyContribution" value="5,000" onkeypress="return validateIntegerInput(event)" oninput="formatMoneyInput(this); calculate(); updateStepUpTooltip()" onpaste="setTimeout(() => formatMoneyInput(this), 0)" inputmode="numeric">
        </div>
    </div>

    <!-- Calculation Explanation Section -->
    <div class="input-full" style="margin-top: 20px;">
        <button type="button" class="explanation-toggle" onclick="toggleExplanation()" id="explanationToggle">
            <span id="explanationToggleText">ğŸ“– How Calculations Work</span>
            <span id="explanationToggleIcon">â–¼</span>
        </button>
        <div class="explanation-content" id="explanationContent" style="display: none;">
            <div class="explanation-section">
                <h3 id="explanationTitle1">Simple Math - Three Steps</h3>
                <p id="explanationText1"><strong>1. Total Contributions:</strong> We add up all your monthly contributions over the years, including the step-up increase each year.</p>
                <p id="explanationText2"><strong>Example:</strong> If you start with Rs. 5,000/month and increase by 10% each year for 30 years, your total contributions will be calculated month by month.</p>
            </div>
            
            <div class="explanation-section">
                <h3 id="explanationTitle2">Fund Performance</h3>
                <p id="explanationText3">Your money grows at <strong>12.5% per year</strong> (Meezan GOKP Pension Fund estimated long-term average).</p>
                <p id="explanationText4">Each month, your balance grows: <strong>New Balance = (Old Balance + Your Contribution) Ã— 1.0104</strong></p>
                <p id="explanationText5">This happens every month for all the years until retirement.</p>
            </div>
            
            <div class="explanation-section">
                <h3 id="explanationTitle3">Final Amount</h3>
                <p id="explanationText6">After all years of contributions and growth, you get your <strong>Projected Value</strong> - this is how much your money has grown to.</p>
                <p id="explanationText7"><strong>Total Growth = Projected Value - Total Contributions</strong></p>
                <p id="explanationText8">This final amount is then converted into monthly payouts for your retirement years.</p>
            </div>
        </div>
    </div>
        </div>

        <div class="column-divider"></div>

        <div class="results-section">
            <div id="results" class="results hidden shareable-card" style="margin-top: 0;">
                <div style="text-align: center; margin-bottom: 12px; border-bottom: 2px dashed #fdd835; padding-bottom: 8px;">
                    <h3 style="color: #333; margin: 0; font-size: 1rem; font-weight: bold; text-transform: uppercase; letter-spacing: 0.5px;" id="headerMyPensionPlan"></h3>
                    <p style="font-size: 0.7rem; color: #666; margin: 3px 0 0 0; font-style: italic;" id="headerPensionPlanner"></p>
                </div>
                <div class="stat-box" style="margin-bottom: 10px;">
                    <span class="stat-title" id="resultLabelStartingAge"></span>
                    <span class="stat-value" id="resultStartAge"></span>
                </div>
                <div class="stat-box" style="margin-bottom: 10px;">
                    <span class="stat-title" id="resultLabelRetirementAge"></span>
                    <span class="stat-value" id="resultRetireAge"></span>
                </div>
                <div class="stat-box" style="margin-bottom: 10px;">
                    <span class="stat-title" id="resultLabelPayoutMonths"></span>
                    <span class="stat-value" id="resultPayoutMonths"></span>
                </div>
                <div class="stat-box" style="margin-bottom: 10px;">
                    <div class="stat-row">
                        <span class="stat-label" id="contributionLabel"></span>
                        <span class="stat-number" id="resultContribution"></span>
                    </div>
                </div>
                <div class="stat-box" style="margin-bottom: 10px;">
                    <span class="stat-title" id="resultTitle"></span>
                    <span class="stat-value" id="resultPayout"></span>
                </div>
                <div class="stat-box" style="margin-bottom: 10px;">
                    <span class="stat-title" id="resultLabelPotAtRetirement"></span>
                    <div class="stat-row">
                        <span class="stat-label" id="resultLabelTotalContributions1"></span>
                        <span class="stat-number" id="resultTotalContributions"></span>
                    </div>
                    <div class="stat-row">
                        <div>
                            <span class="stat-label" id="resultLabelProjectedValue"></span>
                            <div style="font-size: 0.75rem; font-weight: normal; color: #666; margin-top: 2px;" id="resultLabelProjectedValueNote"></div>
                        </div>
                        <span class="stat-number" id="resultPot"></span>
                    </div>
                </div>
                <div class="stat-box" style="margin-bottom: 10px;">
                    <div class="stat-row">
                        <span class="stat-label" id="resultLabelTotalGrowth"></span>
                        <span class="stat-number" id="totalGrowth"></span>
                    </div>
                </div>
                <div class="share-buttons">
                    <button class="share-btn share-btn-whatsapp" onclick="shareOnWhatsApp()" id="btnShareWhatsApp" title="Share on WhatsApp">
                        <svg viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                            <path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"/>
                        </svg>
                    </button>
                    <button class="share-btn share-btn-email" onclick="shareViaEmail()" id="btnShareEmail" title="Share via Email">
                        <svg viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                            <path d="M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"/>
                        </svg>
                    </button>
                    <button class="share-btn share-btn-twitter" onclick="shareOnTwitter()" id="btnShareTwitter" title="Share on Twitter">
                        <svg viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
                        </svg>
                    </button>
                    <button class="share-btn share-btn-copy" onclick="copyImage()" id="btnCopyImage" title="Copy Image">
                        <svg viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg">
                            <path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/>
                        </svg>
                    </button>
                </div>
                <div style="margin-top: 15px; text-align: center;">
                    <a href="https://buymeacoffee.com/msohail01" target="_blank" class="buymeacoffee-btn">
                        <img src="https://cdn.buymeacoffee.com/buttons/v2/default-yellow.png" alt="Buy Me A Coffee" style="height: 50px; width: 217px;">
                    </a>
                </div>
            </div>
        </div>
    </div>

    <div class="footer">
        <div>Data aligned with <a href="https://sarmaaya.pk/mutual-funds/9ed85430-ff8f-4b65-8ebc-63e10a6be33c" target="_blank">Meezan GOKP Pension Fund</a> (12.5% est. long-term avg) - <a href="https://sarmaaya.pk/mutual-funds/9ed85430-ff8f-4b65-8ebc-63e10a6be33c" target="_blank">View Performance</a></div>
        <div class="data-source">
            Inflation: <a href="https://www.sbp.org.pk/ecodata/index2.asp" target="_blank">State Bank of Pakistan</a> (9% avg)<span class="footer-separator">â€¢</span>
            Life Expectancy: <a href="https://data.worldbank.org/indicator/SP.DYN.LE00.IN?locations=PK" target="_blank">World Bank</a> (~68 years)
        </div>
        <div style="margin-top: 10px;">
            <a href="how-to-invest.html" id="howToInvestLink">How to Invest</a>
        </div>
    </div>
</div>

<!-- html2canvas library for image generation -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>

<script>
// Language switcher - current language
// Load saved language from localStorage, default to 'en' if not found
let currentLanguage = localStorage.getItem('pensionPlannerLanguage') || 'en';
// Validate the saved language is valid
const validLanguages = ['en', 'ur', 'ps', 'hnd'];
if (!validLanguages.includes(currentLanguage)) {
    currentLanguage = 'en';
}
let fontsLoaded = { ur: false, ps: false, hnd: false };

// Function to load fonts dynamically only when needed
function loadFontsForLanguage(lang) {
    if (lang === 'en') return; // English uses system fonts, no need to load
    
    // Check if fonts already loaded for this language
    if ((lang === 'ur' || lang === 'hnd') && fontsLoaded.ur) return;
    if (lang === 'ps' && fontsLoaded.ps) return;
    
    const link = document.createElement('link');
    link.rel = 'stylesheet';
    link.href = 'https://fonts.googleapis.com/css2?family=Noto+Nastaliq+Urdu:wght@400;700&family=Noto+Naskh+Arabic:wght@400;700&display=swap';
    link.media = 'print';
    link.onload = function() { this.media = 'all'; };
    document.head.appendChild(link);
    
    // Mark as loaded
    if (lang === 'ur' || lang === 'hnd') fontsLoaded.ur = true;
    if (lang === 'ps') fontsLoaded.ps = true;
}

// Translations embedded directly (no fetch needed)
const translations = {
  "en": {
    "currentAge": "Current Age",
    "retireAge": "Retirement Age",
    "deathAge": "Life Expectancy (Age)",
    "payoutPeriod": "Payout Period",
    "stepUp": "Step-up Saving Yearly (%)",
    "inflation": "Expected Inflation (%)",
    "inflationHint": "(Official: 9-12%)",
    "monthlyPayout": "Monthly Payout at Retirement (PKR)",
    "monthlyContribution": "Monthly Contribution (PKR)",
    "startingAge": "Starting Age",
    "retirementAge": "Retirement Age",
    "payoutMonths": "Number of Payout Months",
    "monthlyPayoutAmount": "After Retirement Monthly Payout",
    "potAtRetirement": "Pot at Retirement",
    "totalContributions": "Total Contributions",
    "projectedValue": "Projected Value",
    "projectedValueNote": "(est. based on fund performance)",
    "monthlyContributionLabel": "Monthly Contribution:",
    "totalGrowth": "Total Growth",
    "myPensionPlan": "My Pension Plan",
    "pensionPlanner": "Pension Planner",
    "shareOnWhatsApp": "Share on WhatsApp",
    "shareViaEmail": "Share via Email",
    "shareOnTwitter": "Share on Twitter",
    "copyImage": "Copy Image",
    "dataAligned": "Data aligned with",
    "viewPerformance": "View Performance",
    "inflationLabel": "Inflation:",
    "lifeExpectancyLabel": "Life Expectancy:",
    "estLongTermAvg": "est. long-term avg",
    "months": "months",
    "years": "years",
    "year": "year",
    "fromFundProfit": "(From fund profit)",
    "lifeExpectancyTooltip": "Life Expectancy:",
    "lifeExpectancyDesc": "Pakistan's average life expectancy is approximately",
    "lifeExpectancyNote": "This determines how long you'll receive pension payouts after retirement. Adjust based on your health and family history.",
    "stepUpTitle": "How Step-Up Works:",
    "stepUpNormal": "Normal",
    "stepUpWithInflation": "With Inflation",
    "inflationImpactTitle": "Inflation Impact Warning:",
    "sharePlanTitle": "Plan your retirement with Pension Planner!",
    "emailSubject": "My Pension Plan - Pension Planner",
    "emailImageNote": "Image attached: pension-plan.png",
    "hashtags": "#PensionPlanner",
    "footerDataAligned": "Data aligned with",
    "visitWebsite": "Visit Website",
    "howToInvest": "How to Invest",
    "footerViewPerformance": "View Performance",
    "howToInvest": "How to Invest",
    "pageTitle": "Pension Planner",
    "languageSwitcherTitle": "Language",
    "explanationToggle": "ğŸ“– How Calculations Work",
    "explanationTitle1": "Simple Math - Three Steps",
    "explanationText1": "1. Total Contributions: We add up all your monthly contributions over the years, including the step-up increase each year.",
    "explanationText2": "Example: If you start with Rs. 5,000/month and increase by 10% each year for 30 years, your total contributions will be calculated month by month.",
    "explanationTitle2": "Fund Performance",
    "explanationText3": "Your money grows at 12.5% per year (Meezan GOKP Pension Fund estimated long-term average).",
    "explanationText4": "Each month, your balance grows: New Balance = (Old Balance + Your Contribution) Ã— 1.0104",
    "explanationText5": "This happens every month for all the years until retirement.",
    "explanationTitle3": "Final Amount",
    "explanationText6": "After all years of contributions and growth, you get your Projected Value - this is how much your money has grown to.",
    "explanationText7": "Total Growth = Projected Value - Total Contributions",
    "explanationText8": "This final amount is then converted into monthly payouts for your retirement years."
  },
  "ur": {
    "currentAge": "Ù…ÙˆØ¬ÙˆØ¯Û Ø¹Ù…Ø±",
    "retireAge": "Ø±ÛŒÙ¹Ø§Ø¦Ø±Ù…Ù†Ù¹ Ú©ÛŒ Ø¹Ù…Ø±",
    "deathAge": "Ù…ØªÙˆÙ‚Ø¹ Ø²Ù†Ø¯Ú¯ÛŒ (Ø¹Ù…Ø±)",
    "payoutPeriod": "Ø§Ø¯Ø§Ø¦ÛŒÚ¯ÛŒ Ú©ÛŒ Ù…Ø¯Øª",
    "stepUp": "Ø³Ø§Ù„Ø§Ù†Û Ø¨Ú†Øª Ù…ÛŒÚº Ø§Ø¶Ø§ÙÛ (%)",
    "inflation": "Ù…ØªÙˆÙ‚Ø¹ Ø§ÙØ±Ø§Ø· Ø²Ø± (%)",
    "inflationHint": "(Ø³Ø±Ú©Ø§Ø±ÛŒ: 9-12%)",
    "monthlyPayout": "Ø±ÛŒÙ¹Ø§Ø¦Ø±Ù…Ù†Ù¹ Ù¾Ø± Ù…Ø§ÛØ§Ù†Û Ø§Ø¯Ø§Ø¦ÛŒÚ¯ÛŒ (PKR)",
    "monthlyContribution": "Ù…Ø§ÛØ§Ù†Û Ø´Ø±Ø§Ú©Øª (PKR)",
    "startingAge": "Ø´Ø±ÙˆØ¹ Ú©ÛŒ Ø¹Ù…Ø±",
    "retirementAge": "Ø±ÛŒÙ¹Ø§Ø¦Ø±Ù…Ù†Ù¹ Ú©ÛŒ Ø¹Ù…Ø±",
    "payoutMonths": "Ø§Ø¯Ø§Ø¦ÛŒÚ¯ÛŒ Ú©Û’ Ù…ÛÛŒÙ†ÙˆÚº Ú©ÛŒ ØªØ¹Ø¯Ø§Ø¯",
    "monthlyPayoutAmount": "Ø±ÛŒÙ¹Ø§Ø¦Ø±Ù…Ù†Ù¹ Ú©Û’ Ø¨Ø¹Ø¯ Ù…Ø§ÛØ§Ù†Û Ø§Ø¯Ø§Ø¦ÛŒÚ¯ÛŒ",
    "potAtRetirement": "Ø±ÛŒÙ¹Ø§Ø¦Ø±Ù…Ù†Ù¹ Ù¾Ø± Ø±Ù‚Ù…",
    "totalContributions": "Ú©Ù„ Ø´Ø±Ø§Ú©ØªÛŒÚº",
    "projectedValue": "Ù…ØªÙˆÙ‚Ø¹ Ù‚ÛŒÙ…Øª",
    "projectedValueNote": "(ÙÙ†Úˆ Ú©ÛŒ Ú©Ø§Ø±Ú©Ø±Ø¯Ú¯ÛŒ Ù¾Ø± Ù…Ø¨Ù†ÛŒ ØªØ®Ù…ÛŒÙ†Û)",
    "monthlyContributionLabel": "Ù…Ø§ÛØ§Ù†Û Ø´Ø±Ø§Ú©Øª:",
    "totalGrowth": "Ú©Ù„ Ø§Ø¶Ø§ÙÛ",
    "myPensionPlan": "Ù…ÛŒØ±Ø§ Ù¾Ù†Ø´Ù† Ù¾Ù„Ø§Ù†",
    "pensionPlanner": "Ù¾Ù†Ø´Ù† Ù¾Ù„Ø§Ù†Ø±",
    "shareOnWhatsApp": "ÙˆØ§Ù¹Ø³ Ø§ÛŒÙ¾ Ù¾Ø± Ø´ÛŒØ¦Ø± Ú©Ø±ÛŒÚº",
    "shareViaEmail": "Ø§ÛŒ Ù…ÛŒÙ„ Ú©Û’ Ø°Ø±ÛŒØ¹Û’ Ø´ÛŒØ¦Ø± Ú©Ø±ÛŒÚº",
    "shareOnTwitter": "Ù¹ÙˆÛŒÙ¹Ø± Ù¾Ø± Ø´ÛŒØ¦Ø± Ú©Ø±ÛŒÚº",
    "copyImage": "ØªØµÙˆÛŒØ± Ú©Ø§Ù¾ÛŒ Ú©Ø±ÛŒÚº",
    "dataAligned": "ÚˆÛŒÙ¹Ø§ Ú©Û’ Ø³Ø§ØªÚ¾ Ù…Ù†Ø³Ù„Ú©",
    "viewPerformance": "Ú©Ø§Ø±Ú©Ø±Ø¯Ú¯ÛŒ Ø¯ÛŒÚ©Ú¾ÛŒÚº",
    "inflationLabel": "Ø§ÙØ±Ø§Ø· Ø²Ø±:",
    "lifeExpectancyLabel": "Ù…ØªÙˆÙ‚Ø¹ Ø²Ù†Ø¯Ú¯ÛŒ:",
    "estLongTermAvg": "Ø·ÙˆÛŒÙ„ Ù…Ø¯ØªÛŒ Ø§ÙˆØ³Ø· Ú©Ø§ ØªØ®Ù…ÛŒÙ†Û",
    "months": "Ù…ÛÛŒÙ†Û’",
    "years": "Ø³Ø§Ù„",
    "year": "Ø³Ø§Ù„",
    "fromFundProfit": "(ÙÙ†Úˆ Ú©Û’ Ù…Ù†Ø§ÙØ¹ Ø³Û’)",
    "lifeExpectancyTooltip": "Ù…ØªÙˆÙ‚Ø¹ Ø²Ù†Ø¯Ú¯ÛŒ:",
    "lifeExpectancyDesc": "Ù¾Ø§Ú©Ø³ØªØ§Ù† Ú©ÛŒ Ø§ÙˆØ³Ø· Ù…ØªÙˆÙ‚Ø¹ Ø²Ù†Ø¯Ú¯ÛŒ ØªÙ‚Ø±ÛŒØ¨Ø§Ù‹",
    "lifeExpectancyNote": "ÛŒÛ Ø·Û’ Ú©Ø±ØªØ§ ÛÛ’ Ú©Û Ø±ÛŒÙ¹Ø§Ø¦Ø±Ù…Ù†Ù¹ Ú©Û’ Ø¨Ø¹Ø¯ Ø¢Ù¾ Ú©ØªÙ†ÛŒ Ø¯ÛŒØ± ØªÚ© Ù¾Ù†Ø´Ù† Ú©ÛŒ Ø§Ø¯Ø§Ø¦ÛŒÚ¯ÛŒ ÙˆØµÙˆÙ„ Ú©Ø±ÛŒÚº Ú¯Û’Û” Ø§Ù¾Ù†ÛŒ ØµØ­Øª Ø§ÙˆØ± Ø®Ø§Ù†Ø¯Ø§Ù†ÛŒ ØªØ§Ø±ÛŒØ® Ú©ÛŒ Ø¨Ù†ÛŒØ§Ø¯ Ù¾Ø± Ø§ÛŒÚˆØ¬Ø³Ù¹ Ú©Ø±ÛŒÚºÛ”",
    "stepUpTitle": "Ø§Ø¶Ø§ÙÛ Ú©ÛŒØ³Û’ Ú©Ø§Ù… Ú©Ø±ØªØ§ ÛÛ’:",
    "stepUpNormal": "Ø¹Ø§Ù…",
    "stepUpWithInflation": "Ø§ÙØ±Ø§Ø· Ø²Ø± Ú©Û’ Ø³Ø§ØªÚ¾",
    "inflationImpactTitle": "Ø§ÙØ±Ø§Ø· Ø²Ø± Ú©Û’ Ø§Ø«Ø±Ø§Øª Ú©ÛŒ ÙˆØ§Ø±Ù†Ù†Ú¯:",
    "sharePlanTitle": "Ù¾Ù†Ø´Ù† Ù¾Ù„Ø§Ù†Ø± Ú©Û’ Ø³Ø§ØªÚ¾ Ø§Ù¾Ù†ÛŒ Ø±ÛŒÙ¹Ø§Ø¦Ø±Ù…Ù†Ù¹ Ú©ÛŒ Ù…Ù†ØµÙˆØ¨Û Ø¨Ù†Ø¯ÛŒ Ú©Ø±ÛŒÚº!",
    "emailSubject": "Ù…ÛŒØ±Ø§ Ù¾Ù†Ø´Ù† Ù¾Ù„Ø§Ù† - Ù¾Ù†Ø´Ù† Ù¾Ù„Ø§Ù†Ø±",
    "emailImageNote": "ØªØµÙˆÛŒØ± Ù…Ù†Ø³Ù„Ú©: pension-plan.png",
    "hashtags": "#Ù¾Ù†Ø´Ù†_Ù¾Ù„Ø§Ù†Ø±",
    "footerDataAligned": "ÚˆÛŒÙ¹Ø§ Ú©Û’ Ø³Ø§ØªÚ¾ Ù…Ù†Ø³Ù„Ú©",
    "visitWebsite": "ÙˆÛŒØ¨ Ø³Ø§Ø¦Ù¹ Ù…Ù„Ø§Ø­Ø¸Û Ú©Ø±ÛŒÚº",
    "howToInvest": "Ú©ÛŒØ³Û’ Ø³Ø±Ù…Ø§ÛŒÛ Ú©Ø§Ø±ÛŒ Ú©Ø±ÛŒÚº",
    "footerViewPerformance": "Ú©Ø§Ø±Ú©Ø±Ø¯Ú¯ÛŒ Ø¯ÛŒÚ©Ú¾ÛŒÚº",
    "pageTitle": "Ù¾Ù†Ø´Ù† Ù¾Ù„Ø§Ù†Ø±",
    "languageSwitcherTitle": "Ø²Ø¨Ø§Ù†",
    "explanationToggle": "ğŸ“– Ø­Ø³Ø§Ø¨ Ú©ÛŒØ³Û’ Ú©Ø§Ù… Ú©Ø±ØªÛ’ ÛÛŒÚº",
    "explanationTitle1": "Ø³Ø§Ø¯Û Ø­Ø³Ø§Ø¨ - ØªÛŒÙ† Ù…Ø±Ø§Ø­Ù„",
    "explanationText1": "1. Ú©Ù„ Ø´Ø±Ø§Ú©ØªÛŒÚº: ÛÙ… ØªÙ…Ø§Ù… Ø³Ø§Ù„ÙˆÚº Ù…ÛŒÚº Ø¢Ù¾ Ú©ÛŒ Ù…Ø§ÛØ§Ù†Û Ø´Ø±Ø§Ú©ØªÙˆÚº Ú©Ùˆ Ø¬Ù…Ø¹ Ú©Ø±ØªÛ’ ÛÛŒÚºØŒ Ø¨Ø´Ù…ÙˆÙ„ ÛØ± Ø³Ø§Ù„ Ø§Ø¶Ø§ÙÛÛ”",
    "explanationText2": "Ù…Ø«Ø§Ù„: Ø§Ú¯Ø± Ø¢Ù¾ Rs. 5,000/Ù…Ø§Û Ø³Û’ Ø´Ø±ÙˆØ¹ Ú©Ø±ÛŒÚº Ø§ÙˆØ± 30 Ø³Ø§Ù„ ØªÚ© ÛØ± Ø³Ø§Ù„ 10% Ø¨Ú‘Ú¾Ø§Ø¦ÛŒÚºØŒ ØªÙˆ Ø¢Ù¾ Ú©ÛŒ Ú©Ù„ Ø´Ø±Ø§Ú©ØªÛŒÚº Ù…ÛÛŒÙ†Û Ø¨Û Ù…ÛÛŒÙ†Û Ø­Ø³Ø§Ø¨ Ú©ÛŒ Ø¬Ø§Ø¦ÛŒÚº Ú¯ÛŒÛ”",
    "explanationTitle2": "ÙÙ†Úˆ Ú©ÛŒ Ú©Ø§Ø±Ú©Ø±Ø¯Ú¯ÛŒ",
    "explanationText3": "Ø¢Ù¾ Ú©Ø§ Ù¾ÛŒØ³Û Ø³Ø§Ù„Ø§Ù†Û 12.5% Ø¨Ú‘Ú¾ØªØ§ ÛÛ’ (Ø§Ù„Ù…ÛŒØ²Ø§Ù† GOKP Ù¾Ù†Ø´Ù† ÙÙ†Úˆ Ú©Ø§ Ø·ÙˆÛŒÙ„ Ù…Ø¯ØªÛŒ Ø§ÙˆØ³Ø· ØªØ®Ù…ÛŒÙ†Û)Û”",
    "explanationText4": "ÛØ± Ù…ÛÛŒÙ†ÛØŒ Ø¢Ù¾ Ú©Ø§ Ø¨ÛŒÙ„Ù†Ø³ Ø¨Ú‘Ú¾ØªØ§ ÛÛ’: Ù†ÛŒØ§ Ø¨ÛŒÙ„Ù†Ø³ = (Ù¾Ø±Ø§Ù†Û’ Ø¨ÛŒÙ„Ù†Ø³ + Ø¢Ù¾ Ú©ÛŒ Ø´Ø±Ø§Ú©Øª) Ã— 1.0104",
    "explanationText5": "ÛŒÛ Ø±ÛŒÙ¹Ø§Ø¦Ø±Ù…Ù†Ù¹ ØªÚ© ØªÙ…Ø§Ù… Ø³Ø§Ù„ÙˆÚº Ù…ÛŒÚº ÛØ± Ù…ÛÛŒÙ†Û ÛÙˆØªØ§ ÛÛ’Û”",
    "explanationTitle3": "Ø­ØªÙ…ÛŒ Ø±Ù‚Ù…",
    "explanationText6": "ØªÙ…Ø§Ù… Ø³Ø§Ù„ÙˆÚº Ú©ÛŒ Ø´Ø±Ø§Ú©ØªÙˆÚº Ø§ÙˆØ± Ù†Ù…Ùˆ Ú©Û’ Ø¨Ø¹Ø¯ØŒ Ø¢Ù¾ Ú©Ùˆ Ø§Ù¾Ù†ÛŒ Ù…ØªÙˆÙ‚Ø¹ Ù‚ÛŒÙ…Øª Ù…Ù„ØªÛŒ ÛÛ’ - ÛŒÛ ÙˆÛ Ø±Ù‚Ù… ÛÛ’ Ø¬Ø³ ØªÚ© Ø¢Ù¾ Ú©Ø§ Ù¾ÛŒØ³Û Ø¨Ú‘Ú¾Ø§ ÛÛ’Û”",
    "explanationText7": "Ú©Ù„ Ù†Ù…Ùˆ = Ù…ØªÙˆÙ‚Ø¹ Ù‚ÛŒÙ…Øª - Ú©Ù„ Ø´Ø±Ø§Ú©ØªÛŒÚº",
    "explanationText8": "ÛŒÛ Ø­ØªÙ…ÛŒ Ø±Ù‚Ù… Ù¾Ú¾Ø± Ø¢Ù¾ Ú©Û’ Ø±ÛŒÙ¹Ø§Ø¦Ø±Ù…Ù†Ù¹ Ø³Ø§Ù„ÙˆÚº Ú©Û’ Ù„ÛŒÛ’ Ù…Ø§ÛØ§Ù†Û Ø§Ø¯Ø§Ø¦ÛŒÚ¯ÛŒÙˆÚº Ù…ÛŒÚº ØªØ¨Ø¯ÛŒÙ„ ÛÙˆØªÛŒ ÛÛ’Û”"
  },
  "ps": {
    "currentAge": "Ø§ÙˆØ³Ù†ÛŒ Ø¹Ù…Ø±",
    "retireAge": "ØªÙ‚Ø§Ø¹Ø¯ Ø¹Ù…Ø±",
    "deathAge": "Ø¯ Ú˜ÙˆÙ†Ø¯ ØªÙ…Ù†Ø§ (Ø¹Ù…Ø±)",
    "payoutPeriod": "Ø¯ ØªØ§Ø¯ÛŒØ§ØªÙˆ Ù…ÙˆØ¯Ù‡",
    "stepUp": "Ú©Ù„Ù†ÛŒ Ø³Ù¾Ù…Ø§ Ø²ÛŒØ§ØªÙˆØ§Ù„ÛŒ (%)",
    "inflation": "ØªÙ…Ù†Ø§ Ø´ÙˆÛŒ ØªÙˆØ±Ù… (%)",
    "inflationHint": "(Ø±Ø³Ù…ÙŠ: 9-12%)",
    "monthlyPayout": "Ù¾Ù‡ ØªÙ‚Ø§Ø¹Ø¯ Ú©Û Ù…ÛŒØ§Ø´ØªÙ†ÛŒ ØªØ§Ø¯ÛŒØ§Øª (PKR)",
    "monthlyContribution": "Ù…ÛŒØ§Ø´ØªÙ†ÛŒ ÙˆÙ†Ú‰Ù‡ (PKR)",
    "startingAge": "Ø¯ Ù¾ÛŒÙ„ Ø¹Ù…Ø±",
    "retirementAge": "Ø¯ ØªÙ‚Ø§Ø¹Ø¯ Ø¹Ù…Ø±",
    "payoutMonths": "Ø¯ ØªØ§Ø¯ÛŒØ§ØªÙˆ Ù…ÛŒØ§Ø´ØªÙˆ Ø´Ù…ÛŒØ±",
    "monthlyPayoutAmount": "Ø¯ ØªÙ‚Ø§Ø¹Ø¯ ÙˆØ±ÙˆØ³ØªÙ‡ Ù…ÛŒØ§Ø´ØªÙ†ÛŒ ØªØ§Ø¯ÛŒØ§Øª",
    "potAtRetirement": "Ù¾Ù‡ ØªÙ‚Ø§Ø¹Ø¯ Ú©Û Ù¾ÛŒØ³Û",
    "totalContributions": "Ù¼ÙˆÙ„ ÙˆÙ†Ú‰Û",
    "projectedValue": "ØªÙ…Ù†Ø§ Ø´ÙˆÛŒ Ø§Ø±Ø²ÚšØª",
    "projectedValueNote": "(Ø¯ ÙÙ†Ø¯ Ú©Ø§Ø±Ú©Ø±Ø¯Ú«Û Ù¾Ø± Ø¨Ù†Ø³Ù¼ Ø§Ù¼Ú©Ù„)",
    "monthlyContributionLabel": "Ù…ÛŒØ§Ø´ØªÙ†ÛŒ ÙˆÙ†Ú‰Ù‡:",
    "totalGrowth": "Ù¼ÙˆÙ„ Ø²ÛŒØ§ØªÙˆØ§Ù„ÛŒ",
    "myPensionPlan": "Ø²Ù…Ø§ Ø¯ ØªÙ‚Ø§Ø¹Ø¯ Ù¾Ù„Ø§Ù†",
    "pensionPlanner": "Ø¯ ØªÙ‚Ø§Ø¹Ø¯ Ù¾Ù„Ø§Ù† Ø¬ÙˆÚ“ÙˆÙ†Ú©ÛŒ",
    "shareOnWhatsApp": "Ù¾Ù‡ ÙˆØ§ØªØ³Ø§Ù¾ Ú©Û Ø´Ø±ÛŒÚ© Ú©Ú“Ø¦",
    "shareViaEmail": "Ù¾Ù‡ Ø¨Ø±ÛŒÚšÙ†Ø§Ù„ÛŒÚ© Ú©Û Ø´Ø±ÛŒÚ© Ú©Ú“Ø¦",
    "shareOnTwitter": "Ù¾Ù‡ Ù¼ÙˆÛŒÙ¼Ø± Ú©Û Ø´Ø±ÛŒÚ© Ú©Ú“Ø¦",
    "copyImage": "Ø§Ù†ÚÙˆØ± Ú©Ø§Ù¾ÙŠ Ú©Ú“Ø¦",
    "dataAligned": "Ø¯ Ú‰ÛŒÙ¼Ø§ Ø³Ø±Ù‡ ØªÚ“Ù„ Ø´ÙˆÛŒ",
    "viewPerformance": "Ú©Ø§Ø±Ú©Ø±Ø¯Ú«Û ÙˆÚ«ÙˆØ±Ø¦",
    "inflationLabel": "ØªÙˆØ±Ù…:",
    "lifeExpectancyLabel": "Ø¯ Ú˜ÙˆÙ†Ø¯ ØªÙ…Ù†Ø§:",
    "estLongTermAvg": "Ø¯ Ø§ÙˆÚ–Ø¯Û Ù…ÙˆØ¯Û Ø§ÙˆØ³Ø· Ø§Ù¼Ú©Ù„",
    "months": "Ù…ÛŒØ§Ø´ØªÛ",
    "years": "Ú©Ø§Ù„ÙˆÙ†Ù‡",
    "year": "Ú©Ø§Ù„",
    "fromFundProfit": "(Ø¯ ÙÙ†Ø¯ Ú«Ù¼Û Ú…Ø®Ù‡)",
    "lifeExpectancyTooltip": "Ø¯ Ú˜ÙˆÙ†Ø¯ ØªÙ…Ù†Ø§:",
    "lifeExpectancyDesc": "Ø¯ Ù¾Ø§Ú©Ø³ØªØ§Ù† Ø§ÙˆØ³Ø· Ø¯ Ú˜ÙˆÙ†Ø¯ ØªÙ…Ù†Ø§ Ù†Ú–Ø¯Û",
    "lifeExpectancyNote": "Ø¯Ø§ Ù¼Ø§Ú©ÙŠ Ú†Û Ø¯ ØªÙ‚Ø§Ø¹Ø¯ ÙˆØ±ÙˆØ³ØªÙ‡ ØªØ§Ø³Ùˆ Ø¨Ù‡ Ú…ÙˆÙ…Ø±Ù‡ ÙˆØ®Øª Ø¯ ØªÙ‚Ø§Ø¹Ø¯ ØªØ§Ø¯ÛŒØ§Øª ØªØ±Ù„Ø§Ø³Ù‡ Ú©ÙˆØ¦. Ø¯ Ø®Ù¾Ù„ Ø±ÙˆØºØªÛŒØ§ Ø§Ùˆ Ú©ÙˆØ±Ù†Û ØªØ§Ø±ÛŒØ® Ù¾Ø± Ø¨Ù†Ø³Ù¼ ØªÙ†Ø¸ÛŒÙ… Ú©Ú“Ø¦.",
    "stepUpTitle": "Ø²ÛŒØ§ØªÙˆØ§Ù„ÛŒ Ú…Ù†Ú«Ù‡ Ú©Ø§Ø± Ú©ÙˆÙŠ:",
    "stepUpNormal": "Ø¹Ø§Ø¯ÙŠ",
    "stepUpWithInflation": "Ø¯ ØªÙˆØ±Ù… Ø³Ø±Ù‡",
    "inflationImpactTitle": "Ø¯ ØªÙˆØ±Ù… Ø§ØºÛŒØ²Ùˆ Ø®Ø¨Ø±ØªÛŒØ§:",
    "sharePlanTitle": "Ø¯ ØªÙ‚Ø§Ø¹Ø¯ Ù¾Ù„Ø§Ù† Ø¬ÙˆÚ“ÙˆÙ†Ú©ÛŒ Ø³Ø±Ù‡ Ø®Ù¾Ù„ ØªÙ‚Ø§Ø¹Ø¯ Ù¾Ù„Ø§Ù† ÙˆÚ©Ú“Ø¦!",
    "emailSubject": "Ø²Ù…Ø§ Ø¯ ØªÙ‚Ø§Ø¹Ø¯ Ù¾Ù„Ø§Ù† - Ø¯ ØªÙ‚Ø§Ø¹Ø¯ Ù¾Ù„Ø§Ù† Ø¬ÙˆÚ“ÙˆÙ†Ú©ÛŒ",
    "emailImageNote": "Ø§Ù†ÚÙˆØ± Ø¶Ù…ÛŒÙ…Ù‡: pension-plan.png",
    "hashtags": "#Ø¯_ØªÙ‚Ø§Ø¹Ø¯_Ù¾Ù„Ø§Ù†",
    "footerDataAligned": "Ø¯ Ú‰ÛŒÙ¼Ø§ Ø³Ø±Ù‡ ØªÚ“Ù„ Ø´ÙˆÛŒ",
    "visitWebsite": "ÙˆÛŒØ¨ Ù¾Ø§Ú¼Ù‡ ÙˆÚ«ÙˆØ±Ø¦",
    "howToInvest": "Ú…Ù†Ú«Ù‡ Ù¾Ø§Ù†Ú«Ù‡ Ø§Ú†ÙˆÙ†Ù‡ ÙˆÚ©Ú“Ø¦",
    "footerViewPerformance": "Ú©Ø§Ø±Ú©Ø±Ø¯Ú«Û ÙˆÚ«ÙˆØ±Ø¦",
    "pageTitle": "Ø¯ ØªÙ‚Ø§Ø¹Ø¯ Ù¾Ù„Ø§Ù† Ø¬ÙˆÚ“ÙˆÙ†Ú©ÛŒ",
    "languageSwitcherTitle": "Ú˜Ø¨Ù‡",
    "explanationToggle": "ğŸ“– Ù…Ø­Ø§Ø³Ø¨Ù‡ Ú…Ù†Ú«Ù‡ Ú©Ø§Ø± Ú©ÙˆÙŠ",
    "explanationTitle1": "Ø¯ÙˆÙ‡ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ù„Ø§Ø±Û",
    "explanationText1": "Ù„Ø§Ø±Ù‡ 1 - Ø¯ ÙˆÙ†Ú‰Û Ù¾Ø± Ø¨Ù†Ø³Ù¼: Ø®Ù¾Ù„ Ù…ÛŒØ§Ø´ØªÙ†ÛŒ ÙˆÙ†Ú‰Ù‡ Ø§Ù†Ø¯Ø§Ø²Ù‡ ÙˆÙ„ÛŒÚ©Ø¦. Ù…Ø­Ø§Ø³Ø¨Ù‡ Ú©ÙˆÙˆÙ†Ú©ÛŒ Ø¯ Ø®Ù¾Ù„Û Ø³Ù¾Ù…Ø§ Ø§Ùˆ Ø¯ ÙÙ†Ø¯ Ø¨ÛŒØ±ØªÙ‡ Ø±Ø§Ú«Ø±ÚÛØ¯Ùˆ Ù¾Ø± Ø¨Ù†Ø³Ù¼ Ø¯ ØªÙ‚Ø§Ø¹Ø¯ ÙˆØ±ÙˆØ³ØªÙ‡ ØªØ§Ø³Ùˆ Ø¨Ù‡ Ù…ÛŒØ§Ø´ØªÙ†ÛŒ Ú…ÙˆÙ…Ø±Ù‡ ØªØ±Ù„Ø§Ø³Ù‡ Ú©ÙˆØ¦ Ù¼Ø§Ú©ÙŠ.",
    "explanationText2": "Ù„Ø§Ø±Ù‡ 2 - Ø¯ ØªØ§Ø¯ÛŒØ§ØªÙˆ Ù¾Ø± Ø¨Ù†Ø³Ù¼: Ø®Ù¾Ù„ ØºÙˆÚšØªÙ„ Ø´ÙˆÛŒ Ù…ÛŒØ§Ø´ØªÙ†ÛŒ Ø¯ ØªÙ‚Ø§Ø¹Ø¯ Ø¹Ø§ÛŒØ¯ ÙˆÙ„ÛŒÚ©Ø¦. Ù…Ø­Ø§Ø³Ø¨Ù‡ Ú©ÙˆÙˆÙ†Ú©ÛŒ Ø¯ Ø¯Û Ù…ÙˆØ®Û ØªØ±Ù„Ø§Ø³Ù‡ Ú©ÙˆÙ„Ùˆ Ù„Ù¾Ø§Ø±Ù‡ ØªØ§Ø³Ùˆ Ø§Ú“ØªÛŒØ§ Ù„Ø±Ø¦ Ù…ÛŒØ§Ø´ØªÙ†ÛŒ Ú…ÙˆÙ…Ø±Ù‡ Ø®ÙˆÙ†Ø¯ÙŠ Ú©Ú“Ø¦ Ù¼Ø§Ú©ÙŠ.",
    "explanationTitle2": "Ø¯ Ø²ÛŒØ§ØªÙˆØ§Ù„ÙŠ ÙˆÙ†Ú‰Û",
    "explanationText3": "Ø³ØªØ§Ø³Ùˆ Ù…ÛŒØ§Ø´ØªÙ†ÛŒ ÙˆÙ†Ú‰Ù‡ Ù‡Ø± Ú©Ø§Ù„ Ø¯ Ø²ÛŒØ§ØªÙˆØ§Ù„ÙŠ Ø³Ù„Ù†Û Ø³Ø±Ù‡ Ø²ÛŒØ§ØªÙˆØ§Ù„ÛŒ Ù…ÙˆÙ…ÙŠ. Ø¯ Ù…Ø«Ø§Ù„ Ù¾Ù‡ ØªÙˆÚ«Ù‡ØŒ Ø¯ 10% Ø²ÛŒØ§ØªÙˆØ§Ù„ÙŠ Ø§Ùˆ Rs. 5,000 Ù„ÙˆÙ…Ú“Ù†ÛŒ ÙˆÙ†Ú‰Ù‡ Ø³Ø±Ù‡:",
    "explanationList1": "<li>Ú©Ø§Ù„ 1: Rs. 5,000/Ù…ÛŒØ§Ø´Øª</li><li>Ú©Ø§Ù„ 2: Rs. 5,500/Ù…ÛŒØ§Ø´Øª (10% Ø²ÛŒØ§ØªÙˆØ§Ù„ÛŒ)</li><li>Ú©Ø§Ù„ 3: Rs. 6,050/Ù…ÛŒØ§Ø´Øª (10% Ø²ÛŒØ§ØªÙˆØ§Ù„ÛŒ)</li><li>Ø§Ùˆ Ù‡Ù…Ø¯Ø§Ø³Û...</li>",
    "explanationTitle3": "Ù…Ø±Ú©Ø¨ Ø²ÛŒØ§ØªÙˆØ§Ù„ÛŒ",
    "explanationText4": "Ø³ØªØ§Ø³Ùˆ ÙˆÙ†Ú‰Û Ø¯ ÙÙ†Ø¯ Ø¨ÛŒØ±ØªÙ‡ Ø±Ø§Ú«Ø±ÚÛØ¯Ùˆ Ø³Ø±Ù‡ Ù…Ø±Ú©Ø¨ Ø³ÙˆØ¯ Ø³Ø±Ù‡ ÙˆØ¯Ù‡ Ú©ÙˆÙŠ (Ú©Ù„Ù†ÛŒ 12.5%ØŒ ÛŒØ§ Ù…ÛŒØ§Ø´ØªÙ†ÛŒ ~1.04%). Ù‡Ø± Ù…ÛŒØ§Ø´Øª:",
    "explanationFormula1": "Ù†ÙˆÛŒ Ø¨ÛŒÙ„Ø§Ù†Ø³ = (Ù¾Ø®ÙˆØ§Ù†ÛŒ Ø¨ÛŒÙ„Ø§Ù†Ø³ + Ù…ÛŒØ§Ø´ØªÙ†ÛŒ ÙˆÙ†Ú‰Ù‡) Ã— (1 + Ù…ÛŒØ§Ø´ØªÙ†ÛŒ Ø¨ÛŒØ±ØªÙ‡ Ø±Ø§Ú«Ø±ÚÛØ¯Ù„)",
    "explanationText5": "Ø¯Ø§ Ø¯ ØªÙ‚Ø§Ø¹Ø¯ ØªØ± Ù¼ÙˆÙ„Ùˆ Ú©Ù„ÙˆÙ†Ùˆ Ù¾ÙˆØ±Û Ù…Ø±Ú©Ø¨ Ú©ÛÚ–ÙŠØŒ Ø³ØªØ§Ø³Ùˆ Ø¯ ÙˆØ±ÙˆØ³ØªÙŠ Ù¾ÙˆÙ¼ Ù¾Ù‡ Ù¾Ø§Ù… ÙˆÚ“ Ø²ÛŒØ§ØªÙˆØ§Ù„ÛŒ Ú©ÙˆÙŠ.",
    "explanationTitle4": "Ø¯ ØªØ§Ø¯ÛŒØ§ØªÙˆ Ù„Ù¾Ø§Ø±Ù‡ Ø¯ Ú©Ù„Ù†ÛŒ ÙÙˆØ±Ù…ÙˆÙ„",
    "explanationText6": "Ø¯ ØªÙ‚Ø§Ø¹Ø¯ ÙˆØ±ÙˆØ³ØªÙ‡ØŒ Ø³ØªØ§Ø³Ùˆ Ù¾ÙˆÙ¼ Ø¯ Ú©Ù„Ù†ÛŒ ÙÙˆØ±Ù…ÙˆÙ„ Ú©Ø§Ø±ÙˆÙ„Ùˆ Ø³Ø±Ù‡ Ù…ÛŒØ§Ø´ØªÙ†ÛŒ ØªØ§Ø¯ÛŒØ§ØªÙˆ ØªÙ‡ Ø¨Ø¯Ù„ÛÚ–ÙŠ:",
    "explanationFormula2": "Ù…ÛŒØ§Ø´ØªÙ†ÛŒ ØªØ§Ø¯ÛŒØ§Øª = Ù¾ÙˆÙ¼ Ã— Ù…ÛŒØ§Ø´ØªÙ†ÛŒ Ø¨ÛŒØ±ØªÙ‡ Ø±Ø§Ú«Ø±ÚÛØ¯Ù„ / (1 - (1 + Ù…ÛŒØ§Ø´ØªÙ†ÛŒ Ø¨ÛŒØ±ØªÙ‡ Ø±Ø§Ú«Ø±ÚÛØ¯Ù„)^(-Ø¯ Ù…ÛŒØ§Ø´ØªÙˆ Ø´Ù…ÛŒØ±))",
    "explanationText7": "Ø¯Ø§ Ú‰Ø§Ú‰Ù‡ Ú©ÙˆÙŠ Ú†Û Ø³ØªØ§Ø³Ùˆ Ù¾ÙˆÙ¼ Ø¯ ØªØ§Ø¯ÛŒØ§ØªÙˆ Ø¯ Ù…ÙˆØ¯Û Ù„Ù¾Ø§Ø±Ù‡ (Ø¯ ØªÙ‚Ø§Ø¹Ø¯ Ø¹Ù…Ø± Ú…Ø®Ù‡ Ø¯ Ú˜ÙˆÙ†Ø¯ ØªÙ…Ù†Ø§ ØªÙ‡) Ø¯Ù‚ÛŒÙ‚Ø§Ù‹ Ø¯ÙˆØ§Ù… Ù„Ø±ÙŠ.",
    "explanationTitle5": "Ø¯ ÙˆÙ†Ú‰Û Ø­Ù„ (Ø¯ÙˆÙ‡ Ø§Ú“Ø®ÛŒØ²Ù‡ Ù„Ù¼ÙˆÙ†)",
    "explanationText8": "Ú©Ù„Ù‡ Ú†Û ØªØ§Ø³Ùˆ ØºÙˆÚšØªÙ„ Ø´ÙˆÛŒ ØªØ§Ø¯ÛŒØ§Øª ÙˆÙ„ÛŒÚ©Ø¦ØŒ Ù…Ø­Ø§Ø³Ø¨Ù‡ Ú©ÙˆÙˆÙ†Ú©ÛŒ Ø¯ Ø§Ú“ÛŒÙ† Ù…ÛŒØ§Ø´ØªÙ†ÛŒ ÙˆÙ†Ú‰Ù‡ Ù…ÙˆÙ†Ø¯Ù„Ùˆ Ù„Ù¾Ø§Ø±Ù‡ Ø¯ÙˆÙ‡ Ø§Ú“Ø®ÛŒØ²Ù‡ Ù„Ù¼ÙˆÙ† Ú©Ø§Ø±ÙˆÙŠ:",
    "explanationList2": "<li>Ø¯ ÛŒÙˆÛ Ø³Ø§Ø­Û Ø³Ø±Ù‡ Ù¾ÛŒÙ„ ÙˆÚ©Ú“Ø¦ (0 Ú…Ø®Ù‡ Ø§Ú“ÛŒÙ† Ù¾ÙˆÙ¼ Ø§Ù†Ø¯Ø§Ø²Ù‡)</li><li>Ø¯ Ù…Ù†ÚÙ†Û Ù†Ù‚Ø·Û ÙˆÙ†Ú‰Ù‡ Ø§Ù†Ø¯Ø§Ø²Ù‡ Ø§Ø²Ù…Ø§ÛŒÚ–Ø¦</li><li>Ù…Ø­Ø§Ø³Ø¨Ù‡ ÙˆÚ©Ú“Ø¦ Ú†Û Ø§ÛŒØ§ Ø¯Ø§ Ø¯ Ø§Ú“ÛŒÙ† Ù¾ÙˆÙ¼ ØªÙ‡ Ø±Ø³ÛŒØ¯Ùˆ Ù„Ù¾Ø§Ø±Ù‡ Ú©Ø§ÙÙŠ Ø²ÛŒØ§ØªÙˆØ§Ù„ÛŒ ØªÙˆÙ„ÛŒØ¯ÙˆÙŠ</li><li>Ø³Ø§Ø­Ù‡ ØªÙ†Ú«Ù‡ Ú©Ú“Ø¦ Ø§Ùˆ Ø¯ Ø¯Ù‚ÛŒÙ‚Û Ø§Ù†Ø¯Ø§Ø²Û ØªØ± Ù…ÙˆÙ†Ø¯Ù„Ùˆ Ù¾ÙˆØ±Û ØªÚ©Ø±Ø§Ø± Ú©Ú“Ø¦</li>",
    "explanationTitle6": "Ø¯ ØªÙˆØ±Ù… Ø§ØºÛŒØ²Ù‡",
    "explanationText9": "ØªÙˆØ±Ù… Ø¯ ÙˆØ®Øª Ø³Ø±Ù‡ Ø¯ Ù¾ÛŒØ±ÙˆØ¯Ù„Ùˆ ÙˆÚ“ØªÛŒØ§ Ú©Ù…Ù‡ Ú©ÙˆÙŠ. Ù…Ø­Ø§Ø³Ø¨Ù‡ Ú©ÙˆÙˆÙ†Ú©ÛŒ ÚšÛŒÙŠ:",
    "explanationFormula3": "Ø±ÛŒÚšØªÛŒÙ†ÛŒ Ù¾ÛŒØ±ÙˆØ¯Ù„Ùˆ ÙˆÚ“ØªÛŒØ§ = Ø±Ø§ØªÙ„ÙˆÙ†Ú©ÛŒ Ø§Ù†Ø¯Ø§Ø²Ù‡ / (1 + Ø¯ ØªÙˆØ±Ù… Ú©Ú†Ù‡)^Ú©Ù„ÙˆÙ†Ù‡",
    "explanationText10": "Ø¯Ø§ ØªØ§Ø³Ùˆ Ø³Ø±Ù‡ Ù…Ø±Ø³ØªÙ‡ Ú©ÙˆÙŠ Ú†Û Ù¾ÙˆÙ‡ Ø´Ø¦ Ú†Û Ø³ØªØ§Ø³Ùˆ Ø¯ ØªÙ‚Ø§Ø¹Ø¯ Ø¹Ø§ÛŒØ¯ Ù¾Ù‡ Ù†Ù† ÙˆØ±Ú Ú©Û ÙˆØ§Ù‚Ø¹ÛŒØ§ Ú…Ù‡ Ù¾ÛŒØ±ÙˆØ¯ÙŠ."
  },
  "hnd": {
    "currentAge": "Ø­Ø§Ù„ÛŒÛ Ø¹Ù…Ø±",
    "retireAge": "Ø±ÛŒÙ¹Ø§Ø¦Ø±Ù…Ù†Ù¹ Ø¯ÛŒ Ø¹Ù…Ø±",
    "deathAge": "Ø§Ù…ÛŒØ¯ Ø²Ù†Ø¯Ú¯ÛŒ (Ø¹Ù…Ø±)",
    "payoutPeriod": "Ø§Ø¯Ø§Ø¦ÛŒÚ¯ÛŒ Ø¯ÛŒ Ù…Ø¯Øª",
    "stepUp": "Ø³Ø§Ù„Ø§Ù†Û Ø¨Ú†Øª ÙˆÚ† Ø§Ø¶Ø§ÙÛ (%)",
    "inflation": "Ø§Ù…ÛŒØ¯ Ø§ÙØ±Ø§Ø· Ø²Ø± (%)",
    "inflationHint": "(Ø³Ø±Ú©Ø§Ø±ÛŒ: 9-12%)",
    "monthlyPayout": "Ø±ÛŒÙ¹Ø§Ø¦Ø±Ù…Ù†Ù¹ ØªÛ’ Ù…Ø§ÛØ§Ù†Û Ø§Ø¯Ø§Ø¦ÛŒÚ¯ÛŒ (PKR)",
    "monthlyContribution": "Ù…Ø§ÛØ§Ù†Û Ø´Ø±Ø§Ú©Øª (PKR)",
    "startingAge": "Ø´Ø±ÙˆØ¹ Ø¯ÛŒ Ø¹Ù…Ø±",
    "retirementAge": "Ø±ÛŒÙ¹Ø§Ø¦Ø±Ù…Ù†Ù¹ Ø¯ÛŒ Ø¹Ù…Ø±",
    "payoutMonths": "Ø§Ø¯Ø§Ø¦ÛŒÚ¯ÛŒ Ø¯Û’ Ù…ÛÛŒÙ†Ø§Úº Ø¯ÛŒ ØªØ¹Ø¯Ø§Ø¯",
    "monthlyPayoutAmount": "Ø±ÛŒÙ¹Ø§Ø¦Ø±Ù…Ù†Ù¹ Ø¯Û’ Ø¨Ø¹Ø¯ Ù…Ø§ÛØ§Ù†Û Ø§Ø¯Ø§Ø¦ÛŒÚ¯ÛŒ",
    "potAtRetirement": "Ø±ÛŒÙ¹Ø§Ø¦Ø±Ù…Ù†Ù¹ ØªÛ’ Ø±Ù‚Ù…",
    "totalContributions": "Ú©Ù„ Ø´Ø±Ø§Ú©ØªØ§Úº",
    "projectedValue": "Ø§Ù…ÛŒØ¯ Ù‚ÛŒÙ…Øª",
    "projectedValueNote": "(ÙÙ†Úˆ Ø¯ÛŒ Ú©Ø§Ø±Ú©Ø±Ø¯Ú¯ÛŒ ØªÛ’ Ù…Ø¨Ù†ÛŒ ØªØ®Ù…ÛŒÙ†Û)",
    "monthlyContributionLabel": "Ù…Ø§ÛØ§Ù†Û Ø´Ø±Ø§Ú©Øª:",
    "totalGrowth": "Ú©Ù„ Ø§Ø¶Ø§ÙÛ",
    "myPensionPlan": "Ù…ÛŒØ±Ø§ Ù¾Ù†Ø´Ù† Ù¾Ù„Ø§Ù†",
    "pensionPlanner": "Ù¾Ù†Ø´Ù† Ù¾Ù„Ø§Ù†Ø±",
    "shareOnWhatsApp": "ÙˆØ§Ù¹Ø³ Ø§ÛŒÙ¾ ØªÛ’ Ø´ÛŒØ¦Ø± Ú©Ø±Ùˆ",
    "shareViaEmail": "Ø§ÛŒ Ù…ÛŒÙ„ Ø¯Û’ Ø°Ø±ÛŒØ¹Û’ Ø´ÛŒØ¦Ø± Ú©Ø±Ùˆ",
    "shareOnTwitter": "Ù¹ÙˆÛŒÙ¹Ø± ØªÛ’ Ø´ÛŒØ¦Ø± Ú©Ø±Ùˆ",
    "copyImage": "ØªØµÙˆÛŒØ± Ú©Ø§Ù¾ÛŒ Ú©Ø±Ùˆ",
    "dataAligned": "ÚˆÛŒÙ¹Ø§ Ø¯Û’ Ù†Ø§Ù„ Ù…Ù†Ø³Ù„Ú©",
    "viewPerformance": "Ú©Ø§Ø±Ú©Ø±Ø¯Ú¯ÛŒ ÚˆÛŒÚ©Ú¾Ùˆ",
    "inflationLabel": "Ø§ÙØ±Ø§Ø· Ø²Ø±:",
    "lifeExpectancyLabel": "Ø§Ù…ÛŒØ¯ Ø²Ù†Ø¯Ú¯ÛŒ:",
    "estLongTermAvg": "Ø·ÙˆÛŒÙ„ Ù…Ø¯ØªÛŒ Ø§ÙˆØ³Ø· Ø¯Ø§ ØªØ®Ù…ÛŒÙ†Û",
    "months": "Ù…ÛÛŒÙ†Û’",
    "years": "Ø³Ø§Ù„",
    "year": "Ø³Ø§Ù„",
    "fromFundProfit": "(ÙÙ†Úˆ Ø¯Û’ Ù…Ù†Ø§ÙØ¹ ØªÙˆÚº)",
    "lifeExpectancyTooltip": "Ø§Ù…ÛŒØ¯ Ø²Ù†Ø¯Ú¯ÛŒ:",
    "lifeExpectancyDesc": "Ù¾Ø§Ú©Ø³ØªØ§Ù† Ø¯ÛŒ Ø§ÙˆØ³Ø· Ø§Ù…ÛŒØ¯ Ø²Ù†Ø¯Ú¯ÛŒ ØªÙ‚Ø±ÛŒØ¨Ø§Ù‹",
    "lifeExpectancyNote": "Ø§ÛŒÛ Ø·Û’ Ú©Ø±ÛŒÙ†Ø¯Ø§ Ø§Û’ Ú©Û Ø±ÛŒÙ¹Ø§Ø¦Ø±Ù…Ù†Ù¹ Ø¯Û’ Ø¨Ø¹Ø¯ ØªØ³ÛŒÚº Ú©ØªÙ†ÛŒ Ø¯ÛŒØ± ØªÚ© Ù¾Ù†Ø´Ù† Ø¯ÛŒ Ø§Ø¯Ø§Ø¦ÛŒÚ¯ÛŒ ÙˆØµÙˆÙ„ Ú©Ø±Ùˆ Ú¯Û’Û” Ø§Ù¾Ù†ÛŒ ØµØ­Øª ØªÛ’ Ø®Ø§Ù†Ø¯Ø§Ù†ÛŒ ØªØ§Ø±ÛŒØ® Ø¯ÛŒ Ø¨Ù†ÛŒØ§Ø¯ ØªÛ’ Ø§ÛŒÚˆØ¬Ø³Ù¹ Ú©Ø±ÙˆÛ”",
    "stepUpTitle": "Ø§Ø¶Ø§ÙÛ Ú©ÛŒÙˆÛŒÚº Ú©Ù… Ú©Ø±ÛŒÙ†Ø¯Ø§ Ø§Û’:",
    "stepUpNormal": "Ø¹Ø§Ù…",
    "stepUpWithInflation": "Ø§ÙØ±Ø§Ø· Ø²Ø± Ø¯Û’ Ù†Ø§Ù„",
    "inflationImpactTitle": "Ø§ÙØ±Ø§Ø· Ø²Ø± Ø¯Û’ Ø§Ø«Ø±Ø§Øª Ø¯ÛŒ ÙˆØ§Ø±Ù†Ù†Ú¯:",
    "sharePlanTitle": "Ù¾Ù†Ø´Ù† Ù¾Ù„Ø§Ù†Ø± Ø¯Û’ Ù†Ø§Ù„ Ø§Ù¾Ù†ÛŒ Ø±ÛŒÙ¹Ø§Ø¦Ø±Ù…Ù†Ù¹ Ø¯ÛŒ Ù…Ù†ØµÙˆØ¨Û Ø¨Ù†Ø¯ÛŒ Ú©Ø±Ùˆ!",
    "emailSubject": "Ù…ÛŒØ±Ø§ Ù¾Ù†Ø´Ù† Ù¾Ù„Ø§Ù† - Ù¾Ù†Ø´Ù† Ù¾Ù„Ø§Ù†Ø±",
    "emailImageNote": "ØªØµÙˆÛŒØ± Ù…Ù†Ø³Ù„Ú©: pension-plan.png",
    "hashtags": "#Ù¾Ù†Ø´Ù†_Ù¾Ù„Ø§Ù†Ø±",
    "footerDataAligned": "ÚˆÛŒÙ¹Ø§ Ø¯Û’ Ù†Ø§Ù„ Ù…Ù†Ø³Ù„Ú©",
    "footerViewPerformance": "Ú©Ø§Ø±Ú©Ø±Ø¯Ú¯ÛŒ ÚˆÛŒÚ©Ú¾Ùˆ",
    "howToInvest": "Ú©ÛŒÙˆÛŒÚº Ø³Ø±Ù…Ø§ÛŒÛ Ú©Ø§Ø±ÛŒ Ú©Ø±Ùˆ",
    "visitWebsite": "ÙˆÛŒØ¨ Ø³Ø§Ø¦Ù¹ ÚˆÛŒÚ©Ú¾Ùˆ",
    "pageTitle": "Ù¾Ù†Ø´Ù† Ù¾Ù„Ø§Ù†Ø±",
    "languageSwitcherTitle": "Ø²Ø¨Ø§Ù†",
    "explanationToggle": "ğŸ“– Ø­Ø³Ø§Ø¨ Ú©ÛŒÙˆÛŒÚº Ú©Ù… Ú©Ø±ÛŒÙ†Ø¯Û’ Ù†ÛŒÚº",
    "explanationTitle1": "Ø³Ø§Ø¯Û Ø­Ø³Ø§Ø¨ - ØªÙ† Ù…Ø±Ø§Ø­Ù„",
    "explanationText1": "1. Ú©Ù„ Ø´Ø±Ø§Ú©ØªØ§Úº: Ø§Ø³Ø§Úº ØªÙ…Ø§Ù… Ø³Ø§Ù„Ø§Úº ÙˆÚ† ØªÙˆØ§ÚˆÛŒØ§Úº Ù…Ø§ÛØ§Ù†Û Ø´Ø±Ø§Ú©ØªØ§Úº Ù†ÙˆÚº Ø¬Ù…Ø¹ Ú©Ø±ÛŒÙ†Ø¯Û’ ÛØ§ÚºØŒ ÛØ± Ø³Ø§Ù„ Ø§Ø¶Ø§ÙÛ Ø³Ù…ÛŒØªÛ”",
    "explanationText2": "Ù…Ø«Ø§Ù„: Ø¬Û’ ØªØ³ÛŒÚº Rs. 5,000/Ù…Ø§Û ØªÙˆÚº Ø´Ø±ÙˆØ¹ Ú©Ø±Ùˆ ØªÛ’ 30 Ø³Ø§Ù„Ø§Úº ØªÚ© ÛØ± Ø³Ø§Ù„ 10% ÙˆØ¯Ú¾Ø§Ø¤ØŒ ØªØ§Úº ØªÙˆØ§ÚˆÛŒØ§Úº Ú©Ù„ Ø´Ø±Ø§Ú©ØªØ§Úº Ù…ÛÛŒÙ†Û Ø¨Û Ù…ÛÛŒÙ†Û Ø­Ø³Ø§Ø¨ ÛÙˆÙ† Ú¯ÛŒØ§ÚºÛ”",
    "explanationTitle2": "ÙÙ†Úˆ Ø¯ÛŒ Ú©Ø§Ø±Ú©Ø±Ø¯Ú¯ÛŒ",
    "explanationText3": "ØªÙˆØ§ÚˆØ§ Ù¾ÛŒØ³Û Ø³Ø§Ù„Ø§Ù†Û 12.5% ÙˆØ¯Ú¾Ø¯Ø§ Ø§Û’ (Ø§Ù„Ù…ÛŒØ²Ø§Ù† GOKP Ù¾Ù†Ø´Ù† ÙÙ†Úˆ Ø¯Ø§ Ø·ÙˆÛŒÙ„ Ù…Ø¯ØªÛŒ Ø§ÙˆØ³Ø· ØªØ®Ù…ÛŒÙ†Û)Û”",
    "explanationText4": "ÛØ± Ù…ÛÛŒÙ†ÛØŒ ØªÙˆØ§ÚˆØ§ Ø¨ÛŒÙ„Ù†Ø³ ÙˆØ¯Ú¾Ø¯Ø§ Ø§Û’: Ù†ÙˆØ§Úº Ø¨ÛŒÙ„Ù†Ø³ = (Ù¾Ø±Ø§Ù†Û’ Ø¨ÛŒÙ„Ù†Ø³ + ØªÙˆØ§ÚˆÛŒ Ø´Ø±Ø§Ú©Øª) Ã— 1.0104",
    "explanationText5": "Ø§ÛŒÛ Ø±ÛŒÙ¹Ø§Ø¦Ø±Ù…Ù†Ù¹ ØªÚ© ØªÙ…Ø§Ù… Ø³Ø§Ù„Ø§Úº ÙˆÚ† ÛØ± Ù…ÛÛŒÙ†Û ÛÙˆÙ†Ø¯Ø§ Ø§Û’Û”",
    "explanationTitle3": "Ø­ØªÙ…ÛŒ Ø±Ù‚Ù…",
    "explanationText6": "ØªÙ…Ø§Ù… Ø³Ø§Ù„Ø§Úº Ø¯ÛŒ Ø´Ø±Ø§Ú©ØªØ§Úº ØªÛ’ Ù†Ù…Ùˆ Ø¯Û’ Ø¨Ø¹Ø¯ØŒ ØªØ³ÛŒÚº Ø§Ù¾Ù†ÛŒ Ø§Ù…ÛŒØ¯ Ù‚ÛŒÙ…Øª Ú¯Ú¾Ù†Ùˆ Ú¯Û’ - Ø§ÛŒÛ Ø§ÙˆÛ Ø±Ù‚Ù… Ø§Û’ Ø¬Ø³ ØªÚ© ØªÙˆØ§ÚˆØ§ Ù¾ÛŒØ³Û ÙˆØ¯Ú¾ÛŒØ§ Ø§Û’Û”",
    "explanationText7": "Ú©Ù„ Ù†Ù…Ùˆ = Ø§Ù…ÛŒØ¯ Ù‚ÛŒÙ…Øª - Ú©Ù„ Ø´Ø±Ø§Ú©ØªØ§Úº",
    "explanationText8": "Ø§ÛŒÛ Ø­ØªÙ…ÛŒ Ø±Ù‚Ù… Ù¾Ú¾Ø± ØªÙˆØ§ÚˆÛ’ Ø±ÛŒÙ¹Ø§Ø¦Ø±Ù…Ù†Ù¹ Ø³Ø§Ù„Ø§Úº Ø¯Û’ Ù„Ø¦ÛŒ Ù…Ø§ÛØ§Ù†Û Ø§Ø¯Ø§Ø¦ÛŒÚ¯ÛŒØ§Úº ÙˆÚ† ØªØ¨Ø¯ÛŒÙ„ ÛÙˆÙ†Ø¯ÛŒ Ø§Û’Û”"
  }
};

// Function to get current translations object
function getTranslations() {
    if (!translations || typeof translations !== 'object' || Object.keys(translations).length === 0) {
        return {};
    }
    // Check if current language exists in translations
    if (translations[currentLanguage]) {
        return translations[currentLanguage];
    }
    // Fallback to English if current language not found
    if (translations['en']) {
        return translations['en'];
    }
    // Last resort: return empty object
    return {};
}

// Function to get translation
function t(key) {
    const trans = getTranslations();
    // If we have translations and the key exists, return the translation
    if (trans && trans[key]) {
        return trans[key];
    }
    // If translations are loaded but key not found, return key
    // If translations not loaded yet, return key (will be updated when loaded)
    return key;
}

// Function to validate integer input (only allow numbers, no decimals)
// Works with both number and text inputs (for money fields with commas)
function validateIntegerInput(event) {
    const char = String.fromCharCode(event.which);
    // Allow: numbers (0-9), backspace, delete, tab, escape, enter, and arrow keys
    // Also allow Ctrl/Cmd combinations (for copy/paste)
    if (!/[0-9]/.test(char) && !event.ctrlKey && !event.metaKey && 
        event.keyCode !== 8 && event.keyCode !== 9 && event.keyCode !== 27 && 
        event.keyCode !== 13 && (event.keyCode !== 46 || event.target.selectionStart === 0) &&
        !(event.keyCode >= 35 && event.keyCode <= 40)) {
        event.preventDefault();
        return false;
    }
    return true;
}

// Function to validate decimal input (allow numbers and decimal point)
function validateDecimalInput(event) {
    const char = String.fromCharCode(event.which);
    // Allow: numbers (0-9), decimal point (.), backspace, delete, tab, escape, enter, and arrow keys
    if (!/[0-9.]/.test(char) && !event.ctrlKey && !event.metaKey && 
        event.keyCode !== 8 && event.keyCode !== 9 && event.keyCode !== 27 && 
        event.keyCode !== 13 && (event.keyCode !== 46 || event.target.selectionStart === 0) &&
        !(event.keyCode >= 35 && event.keyCode <= 40)) {
        event.preventDefault();
        return false;
    }
    // Prevent multiple decimal points
    if (char === '.' && event.target.value.indexOf('.') !== -1) {
        event.preventDefault();
        return false;
    }
    return true;
}

// Function to clean integer input (remove all non-numeric characters)
function cleanIntegerInput(input) {
    input.value = input.value.replace(/[^0-9]/g, '');
}

// Function to clean decimal input (remove non-numeric except decimal point)
function cleanDecimalInput(input) {
    let value = input.value;
    // Remove all non-numeric characters except decimal point
    value = value.replace(/[^0-9.]/g, '');
    // Remove multiple decimal points, keep only the first one
    const parts = value.split('.');
    if (parts.length > 2) {
        value = parts[0] + '.' + parts.slice(1).join('');
    }
    input.value = value;
}

// Function to format number with commas (for money display)
function formatMoney(value) {
    if (!value && value !== 0) return '';
    // Remove any existing commas and parse as integer
    const num = parseInt(value.toString().replace(/,/g, '')) || 0;
    // Format with commas
    return num.toLocaleString('en-US');
}

// Function to parse money value (remove commas and return number)
function parseMoney(value) {
    if (!value) return 0;
    // Remove commas and parse as float
    return parseFloat(value.toString().replace(/,/g, '')) || 0;
}

// Function to format money input on input event
function formatMoneyInput(input) {
    // Get cursor position before formatting
    const cursorPosition = input.selectionStart;
    
    // Get the text before cursor to count how many digits are before it
    const textBeforeCursor = input.value.substring(0, cursorPosition);
    const digitsBeforeCursor = textBeforeCursor.replace(/,/g, '').length;
    
    // Parse and format the value
    const parsed = parseMoney(input.value);
    const formatted = formatMoney(parsed);
    
    // Update the value
    input.value = formatted;
    
    // Calculate new cursor position by finding where the same number of digits are
    let newPosition = 0;
    let digitCount = 0;
    for (let i = 0; i < formatted.length; i++) {
        if (formatted[i] !== ',') {
            digitCount++;
            if (digitCount >= digitsBeforeCursor) {
                newPosition = i + 1;
                break;
            }
        }
    }
    if (newPosition === 0) newPosition = formatted.length;
    
    // Set cursor position
    input.setSelectionRange(newPosition, newPosition);
}

// Function to toggle language dropdown
function toggleLanguageDropdown() {
    const dropdown = document.getElementById('languageDropdown');
    dropdown.classList.toggle('show');
}

// Function to toggle explanation section
function toggleExplanation() {
    const content = document.getElementById('explanationContent');
    const toggle = document.getElementById('explanationToggle');
    const isVisible = content.style.display !== 'none';
    
    content.style.display = isVisible ? 'none' : 'block';
    toggle.classList.toggle('active');
}

// Function to switch language
function switchLanguage(lang) {
    // Verify translations are available for this language
    if (!translations || !translations[lang]) {
        console.warn(`Translations for language '${lang}' not found. Available languages:`, Object.keys(translations || {}));
        // Don't switch if translations aren't available
        return;
    }
    
    currentLanguage = lang;
    
    // Save language preference to localStorage
    localStorage.setItem('pensionPlannerLanguage', lang);
    
    // Load fonts dynamically only when switching to non-English
    loadFontsForLanguage(lang);
    
    // Update body class, HTML lang and dir attributes for language-specific fonts and RTL support
    document.body.classList.remove('lang-en', 'lang-ur', 'lang-ps', 'lang-hnd');
    document.body.classList.add('lang-' + lang);
    
    // Set language code
    const langCode = lang === 'ur' ? 'ur' : lang === 'ps' ? 'ps' : lang === 'hnd' ? 'ur' : 'en';
    document.documentElement.lang = langCode;
    
    // Set direction: RTL for Urdu, Pashto, and Hindko; LTR for English
    const isRTL = lang === 'ur' || lang === 'ps' || lang === 'hnd';
    document.documentElement.dir = isRTL ? 'rtl' : 'ltr';
    document.body.dir = isRTL ? 'rtl' : 'ltr';
    
    // Update active state of language buttons
    document.querySelectorAll('.language-option').forEach(btn => {
        btn.classList.remove('active');
        if (btn.getAttribute('data-lang') === lang) {
            btn.classList.add('active');
        }
    });
    
    // Close dropdown
    document.getElementById('languageDropdown').classList.remove('show');
    
    // Re-initialize all translations
    initializeTranslations();
    
    // Update fields to refresh payout period display with new language
    updateFields();
}

// Close dropdown when clicking outside
document.addEventListener('click', function(event) {
    const switcher = document.querySelector('.language-switcher');
    const dropdown = document.getElementById('languageDropdown');
    if (switcher && dropdown && !switcher.contains(event.target)) {
        dropdown.classList.remove('show');
    }
});

function updateFields() {
    const currentAge = parseInt(document.getElementById('currentAge').value) || 30;
    const retireAge = parseInt(document.getElementById('retireAge').value) || 60;
    const deathAge = parseInt(document.getElementById('deathAge').value) || 68;
    
    // Calculate payout period
    const payoutYears = Math.max(0, deathAge - retireAge);
    const payoutMonths = payoutYears * 12;
    document.getElementById('payoutPeriodDisplay').innerText = `${payoutMonths} ${t('months')} (${payoutYears} ${payoutYears === 1 ? t('year') : t('years')})`;
    
    updateStepUpTooltip();
    calculate();
}

function updateInflationFromSlider() {
    const sliderValue = parseFloat(document.getElementById('inflationSlider').value);
    document.getElementById('inflation').value = sliderValue;
    document.getElementById('inflationValue').innerText = sliderValue.toFixed(1) + '%';
    updateStepUpTooltip();
    calculate();
}

function updateInflationFromInput() {
    const inputValue = parseFloat(document.getElementById('inflation').value) || 9;
    const clampedValue = Math.max(5, Math.min(20, inputValue));
    document.getElementById('inflationSlider').value = clampedValue;
    document.getElementById('inflationValue').innerText = clampedValue.toFixed(1) + '%';
    if (inputValue !== clampedValue) {
        document.getElementById('inflation').value = clampedValue;
    }
    updateStepUpTooltip();
}

let currentTooltipView = 'normal';

function showStepUpView(view, event) {
    if (event) event.stopPropagation();
    currentTooltipView = view;
    
    // Update button states
    document.querySelectorAll('.tooltip-toggle-btn').forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');
    
    // Update tooltip content
    updateStepUpTooltip();
}

function updateStepUpTooltip() {
    const stepUp = parseFloat(document.getElementById('stepUp').value) || 0;
    const inflation = parseFloat(document.getElementById('inflationSlider').value) || 0;
    const currentYear = new Date().getFullYear();
    
    // Get contribution amount
    const baseAmount = parseMoney(document.getElementById('monthlyContribution').value) || 5000;
    
    const tooltipExample = document.getElementById('stepUpExample');
    let html = '';
    
    if (currentTooltipView === 'normal') {
        // Show normal step-up only
        let currentAmount = baseAmount;
        
        for (let i = 0; i < 5; i++) {
            const year = currentYear + i;
            const amountFormatted = "Rs. " + Math.round(currentAmount).toLocaleString();
            
            html += `<div class="tooltip-year">
                <span class="tooltip-year-label">${year}:</span>
                <span class="tooltip-year-value">${amountFormatted}</span>
            </div>`;
            
            // Calculate next year's amount with step-up only
            if (i < 4) {
                currentAmount = currentAmount * (1 + stepUp / 100);
            }
        }
    } else {
        // Show inflation-adjusted (step-up + inflation)
        const effectiveStepUp = stepUp + inflation;
        let currentAmount = baseAmount;
        
        html += `<div style="font-size: 0.75rem; color: #aaa; margin-bottom: 6px;">${stepUp.toFixed(1)}% step-up + ${inflation.toFixed(1)}% inflation = ${effectiveStepUp.toFixed(1)}% per year</div>`;
        
        for (let i = 0; i < 5; i++) {
            const year = currentYear + i;
            const amountFormatted = "Rs. " + Math.round(currentAmount).toLocaleString();
            
            html += `<div class="tooltip-year">
                <span class="tooltip-year-label">${year}:</span>
                <span class="tooltip-year-value">${amountFormatted}</span>
            </div>`;
            
            // Calculate next year's amount with step-up + inflation
            if (i < 4) {
                currentAmount = currentAmount * (1 + effectiveStepUp / 100);
            }
        }
    }
    
    tooltipExample.innerHTML = html;
}

function calculate() {
    const age = parseInt(document.getElementById('currentAge').value);
    const retireAge = parseInt(document.getElementById('retireAge').value);
    const deathAge = parseInt(document.getElementById('deathAge').value);
    const stepUp = parseFloat(document.getElementById('stepUp').value) / 100;
    const inflation = parseFloat(document.getElementById('inflation').value) / 100;
    const returnRate = 0.125; // Fixed 12.5% return rate (Meezan GOKP est. long-term avg)

    const years = retireAge - age;
    const payoutYears = Math.max(1, deathAge - retireAge);
    const payoutMonths = payoutYears * 12;
    
    const inputPayout = parseMoney(document.getElementById('targetPayout').value) || 0;
    const inputContribution = parseMoney(document.getElementById('monthlyContribution').value) || 0;
    
    let requiredPot, monthlyPayout, monthlyContribution, finalPot;
    let totalContributions = 0;
    const monthlyReturn = returnRate / 12;

    // Determine which calculation to perform based on inputs
    // If contribution is entered, calculate payout from it
    // If only payout is entered (and no contribution), calculate contribution needed
    // Prioritize contribution over payout
    if (inputContribution > 0) {
        // Calculate payout from given contribution
        monthlyContribution = inputContribution;
        
        // Calculate final pot with step-up contributions
        const effectiveStepUp = stepUp;
        
        // Calculate final pot with step-up contributions
        let testPot = 0;
        let currentMonthly = monthlyContribution;
        totalContributions = 0;
        
        for(let y=1; y<=years; y++) {
            for(let m=1; m<=12; m++) {
                testPot = (testPot + currentMonthly) * (1 + monthlyReturn);
                totalContributions += currentMonthly;
            }
            currentMonthly *= (1 + effectiveStepUp);
        }
        
        finalPot = testPot;
        
        // Calculate monthly payout from pot using annuity formula
        const discountFactor = Math.pow(1 + monthlyReturn, -payoutMonths);
        monthlyPayout = finalPot * monthlyReturn / (1 - discountFactor);
        requiredPot = finalPot;
        
        // Update payout input with calculated value
        document.getElementById('targetPayout').value = formatMoney(Math.round(monthlyPayout));
        
    } else if (inputPayout > 0) {
        // Calculate contribution needed for desired payout
        monthlyPayout = inputPayout;
        
        // Calculate required pot at retirement using annuity formula
        const discountFactor = Math.pow(1 + monthlyReturn, -payoutMonths);
        requiredPot = monthlyPayout * ((1 - discountFactor) / monthlyReturn);

        // Solve for starting monthly contribution with Step-Up using binary search
        const effectiveStepUp = stepUp;
        
        let low = 0, high = requiredPot;
        monthlyContribution = 0;
        
        for(let i=0; i<40; i++) {
            monthlyContribution = (low + high) / 2;
            let testPot = 0;
            let currentMonthly = monthlyContribution;
            let totalContrib = 0;
            
            for(let y=1; y<=years; y++) {
                for(let m=1; m<=12; m++) {
                    testPot = (testPot + currentMonthly) * (1 + monthlyReturn);
                    totalContrib += currentMonthly;
                }
                currentMonthly *= (1 + effectiveStepUp);
            }
            
            if(testPot < requiredPot) low = monthlyContribution;
            else {
                high = monthlyContribution;
                totalContributions = totalContrib;
            }
        }
        finalPot = requiredPot;
        
        // Update contribution input with calculated value
        document.getElementById('monthlyContribution').value = formatMoney(Math.round(monthlyContribution));
        
    } else {
        // No inputs, don't calculate
        return;
    }

    // Purchasing Power Calculation
    const realPower = monthlyPayout / Math.pow(1 + inflation, years);
    const totalGrowth = finalPot - totalContributions;

    // Display Results
    document.getElementById('results').classList.remove('hidden');
    document.getElementById('resultStartAge').innerText = age + " " + t('years');
    document.getElementById('resultRetireAge').innerText = retireAge + " " + t('years');
    document.getElementById('resultPayoutMonths').innerText = payoutMonths + " " + t('months') + " (" + payoutYears + " " + (payoutYears === 1 ? t('year') : t('years')) + ")";
    
    document.getElementById('resultPayout').innerText = "Rs. " + Math.round(monthlyPayout).toLocaleString();
    
    document.getElementById('resultContribution').innerText = "Rs. " + Math.round(monthlyContribution).toLocaleString();
    document.getElementById('resultTotalContributions').innerText = "Rs. " + Math.round(totalContributions).toLocaleString();
    document.getElementById('resultPot').innerText = "Rs. " + Math.round(finalPot).toLocaleString();
    document.getElementById('totalGrowth').innerText = "Rs. " + Math.round(totalGrowth).toLocaleString();
    
    // Inflation warning - Update tooltip and warning box
    const retirementYear = new Date().getFullYear() + years;
    const futureCost = Math.round(100000 * Math.pow(1 + inflation, years));
    
    // Update inflation tooltip with full details
    document.getElementById('inflationTooltipContent').innerHTML = 
        `<div style="margin-bottom: 8px;">Your <b>Rs. ${Math.round(monthlyPayout).toLocaleString()}</b> monthly payout in ${retirementYear} will have the same buying power as <b>Rs. ${Math.round(realPower).toLocaleString()}</b> today.</div>` +
        `<div style="margin-bottom: 8px;">This means what costs <b>Rs. 100,000</b> today will cost approximately <b>Rs. ${futureCost.toLocaleString()}</b> in ${retirementYear} due to <b>${(inflation*100).toFixed(1)}%</b> average inflation.</div>` +
        `<div style="margin-top: 10px; padding-top: 8px; border-top: 1px solid #555; font-size: 0.85rem; color: #ccc;"><b>ğŸ’¡ Tip:</b> Use the "With Inflation" option in the Step-up tooltip to see how adjusting contributions for inflation affects your plan.</div>`;
}

// Sharing functions
function getShareText() {
    const startAge = document.getElementById('resultStartAge').innerText;
    const retireAge = document.getElementById('resultRetireAge').innerText;
    const payout = document.getElementById('resultPayout').innerText;
    const contribution = document.getElementById('resultContribution').innerText;
    const pot = document.getElementById('resultPot').innerText;
    
    const currentYear = new Date().getFullYear();
    return `ğŸ“Š ${t('myPensionPlan')} (Pakistan ${currentYear})\n\n` +
           `${t('startingAge')}: ${startAge}\n` +
           `${t('retirementAge')}: ${retireAge}\n` +
           `${t('monthlyContributionLabel')} ${contribution}\n` +
           `${t('monthlyPayoutAmount')}: ${payout}\n` +
           `${t('potAtRetirement')}: ${pot}\n` +
           `\n${t('sharePlanTitle')}\n` +
           `${window.location.href}\n\n` +
           `${t('hashtags')}`;
}

// Function to capture shareable card as image
async function captureShareableCard() {
    const shareableCard = document.querySelector('.shareable-card');
    if (!shareableCard) {
        console.error('Shareable card not found');
        return null;
    }
    
    try {
        const canvas = await html2canvas(shareableCard, {
            backgroundColor: '#fff9c4',
            scale: 2, // Higher quality
            logging: false,
            useCORS: true
        });
        
        return canvas.toDataURL('image/png');
    } catch (error) {
        console.error('Error capturing image:', error);
        return null;
    }
}

// Function to download image
function downloadImage(dataUrl, filename) {
    const link = document.createElement('a');
    link.download = filename;
    link.href = dataUrl;
    link.click();
}

// Function to share image via Web Share API (if available)
async function shareImage(dataUrl, includeText = true) {
    if (navigator.share) {
        try {
            // Convert data URL to blob
            const response = await fetch(dataUrl);
            const blob = await response.blob();
            const file = new File([blob], 'pension-plan.png', { type: 'image/png' });
            
            // Try to share with file - don't check canShare first, just try it
            const shareData = {
                files: [file]
            };
            
            if (includeText) {
                shareData.title = t('myPensionPlan');
                shareData.text = t('sharePlanTitle') + ' ' + window.location.href;
            }
            
            await navigator.share(shareData);
            return true;
        } catch (error) {
            // User cancelled or error occurred
            if (error.name === 'AbortError' || error.name === 'NotAllowedError') {
                // User cancelled - don't show error
                return false;
            }
            // Other errors - log but don't show to user
            console.log('Web Share API not available or failed:', error.name);
            return false;
        }
    }
    return false;
}

function shareOnWhatsApp() {
    const text = getShareText();
    const url = `https://wa.me/?text=${encodeURIComponent(text)}`;
    window.open(url, '_blank');
}

async function shareViaEmail() {
    const imageDataUrl = await captureShareableCard();
    if (!imageDataUrl) {
        alert('Failed to generate image. Please try again.');
        return;
    }
    
    // Try Web Share API first (works on mobile devices - shares image directly)
    const shared = await shareImage(imageDataUrl);
    if (shared) {
        // Successfully shared via Web Share API
        return;
    }
    
    // For desktop/fallback: Download image and open email client
    downloadImage(imageDataUrl, 'pension-plan.png');
    
    // Open email client with message
    setTimeout(() => {
        const subject = t('emailSubject');
        const body = t('sharePlanTitle') + '\n\n' + window.location.href + '\n\n' + t('emailImageNote');
        const url = `mailto:?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
        window.location.href = url;
        
        // Show message to user
        alert('Image downloaded! Please attach "pension-plan.png" to your email.');
    }, 300);
}

function shareOnTwitter() {
    const text = getShareText();
    const url = `https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}`;
    window.open(url, '_blank');
}

// Function to copy image to clipboard
async function copyImage() {
    const imageDataUrl = await captureShareableCard();
    if (!imageDataUrl) {
        alert('Failed to generate image. Please try again.');
        return;
    }
    
    try {
        // Convert data URL to blob
        const response = await fetch(imageDataUrl);
        const blob = await response.blob();
        
        // Use Clipboard API to copy image
        if (navigator.clipboard && navigator.clipboard.write) {
            const item = new ClipboardItem({ 'image/png': blob });
            await navigator.clipboard.write([item]);
            
            // Show success message
            const btn = document.getElementById('btnCopyImage');
            const originalTitle = btn.getAttribute('title');
            btn.setAttribute('title', 'Image copied!');
            setTimeout(() => {
                btn.setAttribute('title', originalTitle);
            }, 2000);
            
            // Visual feedback
            btn.style.transform = 'scale(0.9)';
            setTimeout(() => {
                btn.style.transform = '';
            }, 200);
        } else {
            // Fallback: Download image
            downloadImage(imageDataUrl, 'pension-plan.png');
            alert('Image downloaded! (Copy to clipboard not supported in this browser)');
        }
    } catch (error) {
        console.error('Error copying image:', error);
        // Fallback: Download image
        downloadImage(imageDataUrl, 'pension-plan.png');
        alert('Image downloaded! (Copy to clipboard failed)');
    }
}

// Initialize all text from translations
function initializeTranslations() {
    // Input labels
    const labelMap = {
        'labelCurrentAge': 'currentAge',
        'labelRetireAge': 'retireAge',
        'labelDeathAgeText': 'deathAge',
        'labelPayoutPeriod': 'payoutPeriod',
        'labelStepUpText': 'stepUp',
        'labelInflationText': 'inflation',
        'labelInflationHint': 'inflationHint',
        'labelMonthlyPayout': 'monthlyPayout',
        'labelMonthlyContribution': 'monthlyContribution'
    };
    
    for (const [id, key] of Object.entries(labelMap)) {
        const el = document.getElementById(id);
        if (el) el.innerText = t(key);
    }
    
    // Result labels
    const resultLabelMap = {
        'resultLabelStartingAge': 'startingAge',
        'resultLabelRetirementAge': 'retirementAge',
        'resultLabelPayoutMonths': 'payoutMonths',
        'resultTitle': 'monthlyPayoutAmount',
        'resultLabelPotAtRetirement': 'potAtRetirement',
        'resultLabelTotalContributions1': 'totalContributions',
        'resultLabelProjectedValue': 'projectedValue',
        'resultLabelProjectedValueNote': 'projectedValueNote',
        'contributionLabel': 'monthlyContributionLabel',
        'resultLabelTotalGrowth': 'totalGrowth'
    };
    
    for (const [id, key] of Object.entries(resultLabelMap)) {
        const el = document.getElementById(id);
        if (el) {
            if (id === 'resultLabelProjectedValueNote') {
                el.innerText = t(key);
            } else if (id === 'resultLabelTotalContributions1' || id === 'resultLabelProjectedValue') {
                // Add colon for these labels
                el.innerText = t(key) + ':';
            } else {
                el.innerText = t(key);
            }
        }
    }
    
    // Tooltips
    const tooltipMap = {
        'tooltipLifeExpectancyTitle': 'lifeExpectancyTooltip',
        'tooltipStepUpTitle': 'stepUpTitle',
        'tooltipInflationTitle': 'inflationImpactTitle',
        'btnStepUpNormal': 'stepUpNormal',
        'btnStepUpInflation': 'stepUpWithInflation'
    };
    
    for (const [id, key] of Object.entries(tooltipMap)) {
        const el = document.getElementById(id);
        if (el) el.innerText = t(key);
    }
    
    // Update life expectancy tooltip description
    const lifeExpectancyDesc = document.getElementById('tooltipLifeExpectancyDesc');
    if (lifeExpectancyDesc) {
        const currentYear = new Date().getFullYear();
        lifeExpectancyDesc.innerHTML = `${t('lifeExpectancyDesc')} <b>68 ${t('years')}</b> (${currentYear}).`;
    }
    
    const lifeExpectancyNote = document.getElementById('tooltipLifeExpectancyNote');
    if (lifeExpectancyNote) {
        lifeExpectancyNote.innerText = t('lifeExpectancyNote');
    }
    
    // Header
    const headerMyPensionPlan = document.getElementById('headerMyPensionPlan');
    if (headerMyPensionPlan) headerMyPensionPlan.innerText = t('myPensionPlan');
    
    const headerPensionPlanner = document.getElementById('headerPensionPlanner');
    if (headerPensionPlanner) headerPensionPlanner.innerText = t('pensionPlanner');
    
    // Page title
    const pageHeaderTitle = document.getElementById('pageHeaderTitle');
    if (pageHeaderTitle) {
        const currentYear = new Date().getFullYear();
        pageHeaderTitle.innerHTML = `${t('pageTitle')} (Pakistan <span id="headerYear">${currentYear}</span>)`;
    }
    
    // Document title
    document.title = t('pageTitle') + ' | Pakistan';
    
    // Share buttons
    const shareBtnMap = {
        'btnShareWhatsApp': 'shareOnWhatsApp',
        'btnShareEmail': 'shareViaEmail',
        'btnShareTwitter': 'shareOnTwitter',
        'btnCopyImage': 'copyImage'
    };
    
    for (const [id, key] of Object.entries(shareBtnMap)) {
        const el = document.getElementById(id);
        if (el) el.setAttribute('title', t(key));
    }
    
    // Footer
    const footerLinks = document.querySelectorAll('.footer a');
    // Footer text is handled separately in HTML structure
    
    // Update how to invest link text
    const howToInvestLink = document.getElementById('howToInvestLink');
    if (howToInvestLink) {
        howToInvestLink.innerText = t('howToInvest');
    }
    
    // Explanation section
    const explanationMap = {
        'explanationToggleText': 'explanationToggle',
        'explanationTitle1': 'explanationTitle1',
        'explanationText1': 'explanationText1',
        'explanationText2': 'explanationText2',
        'explanationTitle2': 'explanationTitle2',
        'explanationText3': 'explanationText3',
        'explanationTitle3': 'explanationTitle3',
        'explanationText4': 'explanationText4',
        'explanationTitle4': 'explanationTitle4',
        'explanationText6': 'explanationText6',
        'explanationText7': 'explanationText7',
        'explanationTitle5': 'explanationTitle5',
        'explanationText8': 'explanationText8',
        'explanationTitle6': 'explanationTitle6',
        'explanationText9': 'explanationText9',
        'explanationText10': 'explanationText10'
    };
    
    for (const [id, key] of Object.entries(explanationMap)) {
        const el = document.getElementById(id);
        if (el) el.innerText = t(key);
    }
    
}

// Initialize fields on load
document.getElementById('inflationValue').innerText = document.getElementById('inflation').value + '%';
const currentYear = new Date().getFullYear();
const yearElement = document.getElementById('currentYear');
if (yearElement) yearElement.innerText = currentYear;
const headerYearElement = document.getElementById('headerYear');
if (headerYearElement) headerYearElement.innerText = currentYear;

// Set initial active language, font, and direction (from saved preference)
document.body.classList.add('lang-' + currentLanguage);
const isRTLInitial = currentLanguage === 'ur' || currentLanguage === 'ps' || currentLanguage === 'hnd';
document.documentElement.dir = isRTLInitial ? 'rtl' : 'ltr';
document.body.dir = isRTLInitial ? 'rtl' : 'ltr';

// Set language code
const langCode = currentLanguage === 'ur' ? 'ur' : currentLanguage === 'ps' ? 'ps' : currentLanguage === 'hnd' ? 'ur' : 'en';
document.documentElement.lang = langCode;

// Load fonts for saved language if needed
loadFontsForLanguage(currentLanguage);

// Update active state of language buttons
document.querySelectorAll('.language-option').forEach(btn => {
    btn.classList.remove('active');
    if (btn.getAttribute('data-lang') === currentLanguage) {
        btn.classList.add('active');
    }
});

// Initialize translations (now embedded, no need to load)
initializeTranslations();
updateFields();
</script>
</body>
</html>
